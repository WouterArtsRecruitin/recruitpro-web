<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlowMaster Pro - Advanced Recruitment Intelligence Platform</title>
    <!-- Cache Bust: 2025-07-27 20:15 - Contact updates live -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <!-- PDF Generation Libraries - Multiple Fallbacks -->
    <script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1E3A8A;
            --primary-light: #3B82F6;
            --secondary: #FF6B35;
            --secondary-light: #F59E0B;
            --accent: #10B981;
            --gray-50: #F8FAFC;
            --gray-100: #F1F5F9;
            --gray-200: #E2E8F0;
            --gray-300: #CBD5E1;
            --gray-700: #374151;
            --gray-900: #1F2937;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--primary) 0%, #2563EB 50%, var(--primary-light) 100%);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated Background */
        .background-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .floating-shape {
            position: absolute;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        .floating-shape:nth-child(1) {
            width: 80px;
            height: 80px;
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }

        .floating-shape:nth-child(2) {
            width: 120px;
            height: 120px;
            top: 60%;
            right: 15%;
            animation-delay: 2s;
        }

        .floating-shape:nth-child(3) {
            width: 60px;
            height: 60px;
            bottom: 30%;
            left: 20%;
            animation-delay: 4s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 1;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 40px 0;
            color: white;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .logo-icon {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-text {
            font-size: 32px;
            font-weight: 800;
            letter-spacing: -1px;
        }

        .tagline {
            font-size: 18px;
            opacity: 0.9;
            font-weight: 500;
        }

        /* Progress Bar */
        .progress-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 30px 0;
            backdrop-filter: blur(10px);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--secondary-light));
            border-radius: 4px;
            transition: width 0.8s ease;
            width: 0%;
        }

        .progress-text {
            color: white;
            font-size: 14px;
            text-align: center;
            font-weight: 500;
        }

        /* Cards */
        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.15);
        }

        /* Step 1: Introduction */
        .intro-card {
            text-align: center;
        }

        .intro-title {
            font-size: 36px;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .intro-subtitle {
            font-size: 20px;
            color: var(--gray-700);
            margin-bottom: 30px;
            font-weight: 500;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .stat-item {
            text-align: center;
            padding: 20px;
            background: var(--gray-50);
            border-radius: 15px;
        }

        .stat-number {
            font-size: 28px;
            font-weight: 800;
            color: var(--secondary);
            display: block;
        }

        .stat-label {
            font-size: 14px;
            color: var(--gray-700);
            font-weight: 500;
        }

        .cta-button {
            background: linear-gradient(135deg, var(--secondary), var(--secondary-light));
            color: white;
            padding: 18px 40px;
            border: none;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 25px rgba(255, 107, 53, 0.3);
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(255, 107, 53, 0.4);
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 8px;
            font-size: 16px;
        }

        .form-input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid var(--gray-200);
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);
        }

        .company-size-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .size-option {
            padding: 20px;
            border: 2px solid var(--gray-200);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .size-option:hover {
            border-color: var(--primary);
            background: var(--gray-50);
        }

        .size-option.selected {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }

        .size-number {
            font-size: 24px;
            font-weight: 800;
            display: block;
            margin-bottom: 5px;
        }

        .size-label {
            font-size: 14px;
            font-weight: 500;
        }

        /* Two-Level Sector Selection */
        .sector-category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-top: 20px;
        }

        .sector-category {
            background: white;
            border: 3px solid var(--gray-200);
            border-radius: 20px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .sector-category:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .sector-category.selected {
            border-color: var(--primary);
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .category-icon {
            width: 60px;
            height: 60px;
            border-radius: 15px;
            background: linear-gradient(135deg, var(--secondary), var(--secondary-light));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
        }

        .sector-category.selected .category-icon {
            background: rgba(255, 255, 255, 0.2);
        }

        .category-title {
            font-size: 24px;
            font-weight: 800;
        }

        .subsector-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
        }

        .subsector-item {
            padding: 12px 16px;
            background: var(--gray-50);
            border-radius: 10px;
            font-size: 14px;
            font-weight: 500;
            text-align: center;
            transition: all 0.3s ease;
        }

        .sector-category.selected .subsector-item {
            background: rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.9);
        }

        .subsector-selection {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--gray-200);
        }

        .subsector-selection h4 {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--gray-900);
        }

        .subsector-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }

        .subsector-option {
            padding: 15px 20px;
            border: 2px solid var(--gray-200);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            text-align: center;
            font-size: 14px;
            font-weight: 500;
        }

        .subsector-option:hover {
            border-color: var(--primary);
            background: var(--gray-50);
        }

        .subsector-option.selected {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }

        /* Assessment Questions */
        .assessment-section {
            background: linear-gradient(135deg, var(--gray-50) 0%, white 100%);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
        }

        .question-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            border: 1px solid var(--gray-200);
        }

        .question-number {
            display: inline-block;
            background: var(--primary);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 18px;
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .answer-options {
            display: grid;
            gap: 12px;
        }

        .answer-option {
            padding: 15px 20px;
            border: 2px solid var(--gray-200);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .answer-option:hover {
            border-color: var(--primary);
            background: var(--gray-50);
        }

        .answer-option.selected {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }

        .option-number {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 12px;
            color: var(--gray-700);
        }

        .answer-option.selected .option-number {
            background: rgba(255, 255, 255, 0.3);
            color: white;
        }

        .option-text {
            flex: 1;
            font-size: 15px;
            font-weight: 500;
        }

        /* Real-time Score Tracker */
        .score-tracker {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            z-index: 1000;
            min-width: 200px;
        }

        .score-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: 10px;
            text-align: center;
        }

        .score-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: conic-gradient(var(--secondary) 0deg, var(--secondary) 0deg, var(--gray-200) 0deg, var(--gray-200) 360deg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            position: relative;
        }

        .score-circle::before {
            content: '';
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: white;
            position: absolute;
        }

        .score-percentage {
            font-size: 18px;
            font-weight: 800;
            color: var(--primary);
            z-index: 1;
        }

        .score-label {
            font-size: 12px;
            color: var(--gray-700);
            text-align: center;
            font-weight: 500;
        }

        .questions-progress {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--gray-200);
            text-align: center;
        }

        .progress-numbers {
            font-size: 14px;
            color: var(--gray-700);
            font-weight: 500;
        }

        /* Candidate Preview */
        .candidate-preview {
            background: linear-gradient(135deg, var(--gray-50) 0%, white 100%);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
        }

        .preview-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .preview-title {
            font-size: 28px;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .preview-subtitle {
            font-size: 16px;
            color: var(--gray-700);
            font-weight: 500;
        }

        .candidate-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .candidate-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            border: 1px solid var(--gray-200);
            transition: all 0.3s ease;
        }

        .candidate-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
        }

        .candidate-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .candidate-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 800;
            font-size: 18px;
        }

        .candidate-info h4 {
            font-size: 18px;
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 4px;
        }

        .candidate-role {
            font-size: 14px;
            color: var(--gray-700);
            font-weight: 500;
        }

        .candidate-skills {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .skill-tag {
            padding: 4px 12px;
            background: var(--gray-100);
            border-radius: 20px;
            font-size: 12px;
            color: var(--gray-700);
            font-weight: 500;
        }

        .match-score {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .score-bar {
            flex: 1;
            height: 6px;
            background: var(--gray-200);
            border-radius: 3px;
            overflow: hidden;
        }

        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), #34D399);
            border-radius: 3px;
        }

        .score-text {
            font-size: 14px;
            font-weight: 600;
            color: var(--accent);
        }

        /* Service Selection - 3 Services */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .service-card {
            background: white;
            border: 2px solid var(--gray-200);
            border-radius: 20px;
            padding: 35px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .service-card:hover::before {
            transform: scaleX(1);
        }

        .service-card:hover {
            border-color: var(--primary);
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .service-card.selected {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }

        .service-card.selected::before {
            transform: scaleX(1);
            background: rgba(255, 255, 255, 0.3);
        }

        .service-icon {
            width: 70px;
            height: 70px;
            border-radius: 15px;
            background: linear-gradient(135deg, var(--secondary), var(--secondary-light));
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 25px;
            font-size: 32px;
        }

        .service-card.selected .service-icon {
            background: rgba(255, 255, 255, 0.2);
        }

        .service-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .service-description {
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 25px;
            opacity: 0.8;
        }

        .service-features {
            list-style: none;
            margin-bottom: 25px;
        }

        .service-features li {
            padding: 8px 0;
            font-size: 15px;
            opacity: 0.9;
        }

        .service-features li::before {
            content: '‚úì';
            color: var(--accent);
            font-weight: bold;
            margin-right: 12px;
        }

        .service-card.selected .service-features li::before {
            color: rgba(255, 255, 255, 0.8);
        }

        .service-price {
            font-size: 28px;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .service-card.selected .service-price {
            color: white;
        }

        /* Contact Form with Privacy */
        .contact-form {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: 20px;
            padding: 40px;
            color: white;
        }

        .contact-form .form-input {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: white;
        }

        .contact-form .form-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .contact-form .form-input:focus {
            border-color: rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.15);
        }

        .contact-form .form-label {
            color: rgba(255, 255, 255, 0.9);
        }

        .privacy-statement {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin: 25px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .privacy-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
            color: rgba(255, 255, 255, 0.95);
        }

        .privacy-text {
            font-size: 14px;
            line-height: 1.5;
            color: rgba(255, 255, 255, 0.8);
        }

        .privacy-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin: 20px 0;
            cursor: pointer;
        }

        .privacy-checkbox input[type="checkbox"] {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.1);
            cursor: pointer;
        }

        .privacy-checkbox input[type="checkbox"]:checked {
            background: var(--secondary);
            border-color: var(--secondary);
        }

        .privacy-label {
            font-size: 14px;
            line-height: 1.4;
            color: rgba(255, 255, 255, 0.9);
            cursor: pointer;
        }

        /* Success State */
        .success-state {
            text-align: center;
            padding: 60px 40px;
        }

        .success-icon {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), #34D399);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            font-size: 50px;
            color: white;
        }

        .success-title {
            font-size: 32px;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .success-message {
            font-size: 18px;
            color: var(--gray-700);
            margin-bottom: 30px;
            line-height: 1.6;
        }

        /* Navigation */
        .nav-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .nav-button {
            padding: 12px 30px;
            border: 2px solid var(--primary);
            border-radius: 50px;
            background: white;
            color: var(--primary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            background: var(--primary);
            color: white;
        }

        .nav-button.primary {
            background: var(--primary);
            color: white;
        }

        .nav-button.primary:hover {
            background: var(--primary-light);
        }

        /* Hidden states */
        .hidden {
            display: none;
        }

        /* Loading Animation */
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Live Chat Bubble */
        .chat-bubble {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--secondary), var(--secondary-light));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(255, 107, 53, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .chat-bubble:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 35px rgba(255, 107, 53, 0.4);
        }

        .chat-bubble::before {
            content: 'üí¨';
            font-size: 24px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 0 15px;
            }
            
            .intro-title {
                font-size: 28px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .sector-category-grid {
                grid-template-columns: 1fr;
            }
            
            .services-grid {
                grid-template-columns: 1fr;
            }
            
            .score-tracker {
                position: relative;
                top: auto;
                right: auto;
                margin: 20px 0;
            }
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="background-animation">
        <div class="floating-shape"></div>
        <div class="floating-shape"></div>
        <div class="floating-shape"></div>
    </div>

    <!-- Live Chat Bubble -->
    <div class="chat-bubble" onclick="openChat()"></div>

    <!-- Real-time Score Tracker -->
    <div class="score-tracker hidden" id="scoreTracker">
        <div class="score-title">Jouw Assessment Score</div>
        <div class="score-circle" id="scoreCircle">
            <div class="score-percentage" id="scorePercentage">0%</div>
        </div>
        <div class="score-label" id="scoreLabel">Assessment in uitvoering...</div>
        <div class="questions-progress">
            <div class="progress-numbers" id="questionsProgress">0 van 24 vragen</div>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo-container">
                <div class="logo-icon">
                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                        <path d="M8 15 L20 25 L32 15" stroke="white" stroke-width="2" fill="none" stroke-linecap="round"/>
                        <path d="M12 20 L20 28 L28 20" stroke="#FF6B35" stroke-width="2" fill="none" stroke-linecap="round"/>
                        <circle cx="20" cy="20" r="2" fill="white"/>
                    </svg>
                </div>
                <h1 class="logo-text">FlowMaster Pro</h1>
            </div>
            <p class="tagline">Advanced Recruitment Intelligence Platform</p>
        </header>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Stap 1 van 8</div>
        </div>

        <!-- Step 1: Introduction -->
        <div class="card intro-card" id="step1">
            <h2 class="intro-title">De Meest Complete Recruitment Assessment</h2>
            <p class="intro-subtitle">19 expertises + sector-specifieke modules + kandidaat preview = Jouw complete recruitment blueprint</p>
            
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-number">2,500+</span>
                    <span class="stat-label">HR Leaders</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">29+</span>
                    <span class="stat-label">Expert Vragen</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">340%</span>
                    <span class="stat-label">ROI Verbetering</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">7min</span>
                    <span class="stat-label">Complete Analyse</span>
                </div>
            </div>

            <button class="cta-button" onclick="nextStep()">Start Complete Assessment üöÄ</button>
        </div>

        <!-- Step 2: Company Information -->
        <div class="card hidden" id="step2">
            <h2 class="intro-title">Vertel Ons Over Je Organisatie</h2>
            <p class="intro-subtitle">Deze informatie helpt ons de perfecte analyse en kandidaten voor jou te bepalen</p>

            <div class="form-group">
                <label class="form-label">Bedrijfsnaam</label>
                <input type="text" class="form-input" id="companyName" placeholder="Jouw bedrijfsnaam">
            </div>

            <div class="form-group">
                <label class="form-label">Jouw Naam</label>
                <input type="text" class="form-input" id="contactName" placeholder="Voor- en achternaam">
            </div>

            <div class="form-group">
                <label class="form-label">Hoeveel medewerkers heeft jullie organisatie?</label>
                <div class="company-size-grid">
                    <div class="size-option" onclick="selectSize('1-10')">
                        <span class="size-number">1-10</span>
                        <span class="size-label">Startup</span>
                    </div>
                    <div class="size-option" onclick="selectSize('11-50')">
                        <span class="size-number">11-50</span>
                        <span class="size-label">Scale-up</span>
                    </div>
                    <div class="size-option" onclick="selectSize('51-200')">
                        <span class="size-number">51-200</span>
                        <span class="size-label">Middelgroot</span>
                    </div>
                    <div class="size-option" onclick="selectSize('201-500')">
                        <span class="size-number">201-500</span>
                        <span class="size-label">Groot</span>
                    </div>
                    <div class="size-option" onclick="selectSize('500+')">
                        <span class="size-number">500+</span>
                        <span class="size-label">Enterprise</span>
                    </div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="nav-button" onclick="prevStep()">Vorige</button>
                <button class="nav-button primary" onclick="nextStep()" id="step2Next" disabled>Volgende</button>
            </div>
        </div>

        <!-- Step 3: Sector Category Selection -->
        <div class="card hidden" id="step3">
            <h2 class="intro-title">Welke Hoofdcategorie Past Bij Je Organisatie?</h2>
            <p class="intro-subtitle">Kies tussen Techniek of Industrie om specifieke expertise modules te activeren</p>

            <div class="sector-category-grid">
                <div class="sector-category" onclick="selectSectorCategory('techniek')">
                    <div class="category-header">
                        <div class="category-icon">üîß</div>
                        <h3 class="category-title">TECHNIEK</h3>
                    </div>
                    <div class="subsector-grid">
                        <div class="subsector-item">Software Development</div>
                        <div class="subsector-item">IT Infrastructure</div>
                        <div class="subsector-item">Data & Analytics</div>
                        <div class="subsector-item">Cybersecurity</div>
                        <div class="subsector-item">AI & Machine Learning</div>
                        <div class="subsector-item">Cloud Computing</div>
                    </div>
                </div>

                <div class="sector-category" onclick="selectSectorCategory('industrie')">
                    <div class="category-header">
                        <div class="category-icon">üè≠</div>
                        <h3 class="category-title">INDUSTRIE</h3>
                    </div>
                    <div class="subsector-grid">
                        <div class="subsector-item">Manufacturing</div>
                        <div class="subsector-item">Healthcare</div>
                        <div class="subsector-item">Financial Services</div>
                        <div class="subsector-item">Retail & E-commerce</div>
                        <div class="subsector-item">Energy & Utilities</div>
                        <div class="subsector-item">Consulting</div>
                    </div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="nav-button" onclick="prevStep()">Vorige</button>
                <button class="nav-button primary" onclick="showSubsectorSelection()" id="step3Next" disabled>Kies Specifieke Sector</button>
            </div>
        </div>

        <!-- Step 4: Subsector Selection -->
        <div class="card hidden" id="step4">
            <h2 class="intro-title">Kies Je Specifieke Sector</h2>
            <p class="intro-subtitle" id="subsectorSubtitle">Selecteer de sector die het beste bij je organisatie past</p>

            <div class="subsector-selection">
                <div class="subsector-options" id="subsectorOptions">
                    <!-- Will be populated based on category selection -->
                </div>
            </div>

            <div class="nav-buttons">
                <button class="nav-button" onclick="prevStep()">Vorige</button>
                <button class="nav-button primary" onclick="startAssessment()" id="step4Next" disabled>Start 19-Vragen Assessment</button>
            </div>
        </div>

        <!-- Step 5: 19-Question Assessment -->
        <div class="card hidden" id="step5">
            <div class="assessment-section">
                <div class="preview-header">
                    <h2 class="preview-title">FlowMaster Pro Assessment</h2>
                    <p class="preview-subtitle">24 strategische vragen over jouw recruitment maturity & moderne trends</p>
                </div>

                <div id="assessmentContainer">
                    <!-- 19 questions will be dynamically generated here -->
                </div>

                <div class="nav-buttons">
                    <button class="nav-button" onclick="prevStep()">Vorige</button>
                    <button class="nav-button primary" onclick="startSectorQuestions()" id="step5Next" disabled>Ga naar Sector Modules</button>
                </div>
            </div>
        </div>

        <!-- Step 6: Sector-Specific Questions -->
        <div class="card hidden" id="step6">
            <div class="assessment-section">
                <div class="preview-header">
                    <h2 class="preview-title" id="sectorAssessmentTitle">Sector Modules</h2>
                    <p class="preview-subtitle">Gespecialiseerde vragen voor jouw sector expertise</p>
                </div>

                <div id="sectorQuestionsContainer">
                    <!-- Sector questions will be dynamically generated here -->
                </div>

                <div class="nav-buttons">
                    <button class="nav-button" onclick="prevStep()">Vorige</button>
                    <button class="nav-button primary" onclick="generateResults()" id="step6Next" disabled>Genereer Kandidaten</button>
                </div>
            </div>
        </div>

        <!-- Step 7: Candidate Preview -->
        <div class="card hidden" id="step7">
            <div class="candidate-preview">
                <div class="preview-header">
                    <h2 class="preview-title">Jouw Potenti√´le Kandidaten</h2>
                    <p class="preview-subtitle">Gebaseerd op jouw complete assessment score en sector expertise - dit zijn voorbeelden van talent dat je zou kunnen aantrekken</p>
                </div>

                <div class="candidate-cards" id="candidateCards">
                    <!-- Candidates will be generated here -->
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <p style="color: var(--gray-700); font-size: 16px; font-weight: 500;">Perfect! Nu weet je welke kandidaten je kunt aantrekken. Kies hieronder welke service je het meest interesseert:</p>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="nav-button" onclick="prevStep()">Vorige</button>
                <button class="nav-button primary" onclick="nextStep()">Kies Jouw Service</button>
            </div>
        </div>

        <!-- Step 8: Service Selection (3 Services) -->
        <div class="card hidden" id="step8">
            <h2 class="intro-title">Welke Service Interesseert Je Het Meest?</h2>
            <p class="intro-subtitle">Kies 1 service waar je direct mee wilt starten (gebaseerd op jouw assessment resultaten)</p>

            <div class="services-grid">
                <div class="service-card" onclick="selectService('optimization')">
                    <div class="service-icon">üéØ</div>
                    <h3 class="service-title">AI-Powered Process Optimization</h3>
                    <p class="service-description">Revolutioneer jouw recruitment proces met AI-gedreven optimalisatie en real-time performance tracking.</p>
                    <ul class="service-features">
                        <li>AI-driven process audit & optimization</li>
                        <li>Real-time KPI dashboard & analytics</li>
                        <li>Predictive channel effectiveness</li>
                        <li>Advanced ROI tracking & forecasting</li>
                        <li>Team training & AI adoption coaching</li>
                        <li>Custom automation workflows</li>
                    </ul>
                    <div class="service-price">‚Ç¨3,497</div>
                    <div style="font-size: 12px; color: var(--gray-700); margin-top: 5px;">Was ‚Ç¨4,997 - Limited Time</div>
                </div>

                <div class="service-card" onclick="selectService('branding')">
                    <div class="service-icon">‚ú®</div>
                    <h3 class="service-title">Next-Gen Employer Branding</h3>
                    <p class="service-description">Bouw een magnetische employer brand die Gen Z en Millennials automatisch aantrekt met moderne storytelling.</p>
                    <ul class="service-features">
                        <li>Social-first EVP development</li>
                        <li>Video storytelling & content creation</li>
                        <li>LinkedIn & TikTok optimization</li>
                        <li>Employee advocacy automation</li>
                        <li>Glassdoor reputation management</li>
                        <li>Influencer recruitment campaigns</li>
                    </ul>
                    <div class="service-price">‚Ç¨2,297</div>
                    <div style="font-size: 12px; color: var(--gray-700); margin-top: 5px;">Was ‚Ç¨2,997 - Limited Time</div>
                </div>

                <div class="service-card" onclick="selectService('intelligence')">
                    <div class="service-icon">üîç</div>
                    <h3 class="service-title">Recruitment Intelligence Hub</h3>
                    <p class="service-description">Krijg unfair advantage met AI-powered market intelligence en predictive talent insights voor jouw sector.</p>
                    <ul class="service-features">
                        <li>AI-powered talent pool mapping</li>
                        <li>Real-time competitor intelligence</li>
                        <li>Predictive market trend analysis</li>
                        <li>Dynamic sourcing strategy engine</li>
                        <li>Skills gap forecasting</li>
                        <li>Salary benchmarking automation</li>
                    </ul>
                    <div class="service-price">‚Ç¨1,497</div>
                    <div style="font-size: 12px; color: var(--gray-700); margin-top: 5px;">Was ‚Ç¨1,997 - Limited Time</div>
                </div>
            </div>

            <div style="text-align: center; margin: 30px 0;">
                <p style="color: var(--gray-700); font-size: 16px; font-weight: 500;">
                    <span id="selectedCount">0</span>/1 service geselecteerd
                </p>
            </div>

            <div class="nav-buttons">
                <button class="nav-button" onclick="prevStep()">Vorige</button>
                <button class="nav-button primary" onclick="nextStep()" id="step8Next" disabled>Plan Gratis Consultatie</button>
            </div>
        </div>

        <!-- Step 9: Contact Form with Privacy -->
        <div class="card hidden" id="step9">
            <div class="contact-form">
                <h2 class="intro-title" style="color: white;">Claim Je Gratis Strategy Call</h2>
                <p class="intro-subtitle" style="color: rgba(255, 255, 255, 0.9);">We nemen binnen 24 uur contact met je op om jouw complete recruitment strategie door te nemen</p>

                <div class="form-group">
                    <label class="form-label">Email Adres</label>
                    <input type="email" class="form-input" id="contactEmail" placeholder="jouw@email.nl">
                </div>

                <div class="form-group">
                    <label class="form-label">Telefoonnummer</label>
                    <input type="tel" class="form-input" id="contactPhone" placeholder="+31 614 314 593">
                </div>

                <div class="form-group">
                    <label class="form-label">Mobiel Nummer</label>
                    <input type="tel" class="form-input" id="contactMobile" placeholder="+31 614 314 593">
                </div>

                <div class="form-group">
                    <label class="form-label">Wat is je grootste recruitment uitdaging?</label>
                    <textarea class="form-input" id="challenge" rows="4" placeholder="Bijv. we vinden geen goede developers, tijd-tot-hire is te lang, kandidaten haken af..."></textarea>
                </div>

                <div class="privacy-statement">
                    <div class="privacy-title">Privacy & Gegevensverwerking</div>
                    <div class="privacy-text">
                        Jouw gegevens worden uitsluitend gebruikt voor het verstrekken van onze recruitment advisory services. 
                        We delen geen data met derden en je kunt je op elk moment uitschrijven. Bekijk ons volledige 
                        <a href="#" style="color: rgba(255, 255, 255, 0.9); text-decoration: underline;">privacybeleid</a>.
                    </div>
                </div>

                <div class="privacy-checkbox">
                    <input type="checkbox" id="privacyConsent">
                    <label class="privacy-label" for="privacyConsent">
                        Ik ga akkoord met de verwerking van mijn gegevens zoals beschreven in het privacybeleid en wil graag updates ontvangen over recruitment best practices.
                    </label>
                </div>

                <div class="nav-buttons">
                    <button class="nav-button" onclick="prevStep()">Vorige</button>
                    <button class="nav-button primary" onclick="submitForm()" id="submitButton" disabled>Plan Mijn Strategy Call üöÄ</button>
                </div>
            </div>
        </div>

        <!-- Step 10: Success -->
        <div class="card hidden" id="step10">
            <div class="success-state">
                <div class="success-icon">üéâ</div>
                <h2 class="success-title">Perfect! Je Complete Assessment is Voltooid</h2>
                <p class="success-message">
                    Bedankt <span id="finalName"></span>! Je assessment score van <strong><span id="finalScore">0</span>%</strong> met sector expertise is opgeslagen. 
                    We nemen binnen 24 uur contact met je op voor jouw persoonlijke strategie sessie.
                    <br><br>
                    Check je email voor alle details en een exclusieve voorbereidingshandleiding.
                </p>
                
                <div style="background: var(--gray-50); border-radius: 15px; padding: 25px; margin: 30px 0; text-align: left;">
                    <h3 style="color: var(--primary); margin-bottom: 15px;">Wat kun je verwachten:</h3>
                    <ul style="list-style: none; color: var(--gray-700);">
                        <li style="padding: 8px 0;">‚úÖ Complete sector-specifieke analyse met modules</li>
                        <li style="padding: 8px 0;">‚úÖ Custom strategie voor <span id="finalCompany"></span></li>
                        <li style="padding: 8px 0;">‚úÖ Implementatie roadmap voor Q1 2025</li>
                        <li style="padding: 8px 0;">‚úÖ Exclusieve benchmark data uit onze database</li>
                    </ul>
                </div>

                <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-top: 30px;">
                    <button class="cta-button" onclick="downloadAssessmentReport()" style="background: var(--accent); flex: 1; min-width: 200px;">
                        üìÑ Download Je Rapport
                    </button>
                    <button class="cta-button" onclick="window.location.reload()" style="background: var(--secondary); flex: 1; min-width: 200px;">
                        üîÑ Start Nieuwe Assessment
                    </button>
                </div>
                
                <div style="margin-top: 20px; color: var(--gray-700); font-size: 0.9rem;">
                    <p>üìß Je rapport wordt ook automatisch naar je email verstuurd</p>
                    <p>üí° <strong>Tip:</strong> Deel je resultaten op LinkedIn voor extra zichtbaarheid</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // A/B Testing Framework
        class ABTestFramework {
            constructor() {
                this.tests = {
                    'pricing_strategy': {
                        variants: ['standard', 'discount', 'premium'],
                        weights: [33, 34, 33]
                    },
                    'hero_messaging': {
                        variants: ['benefits', 'features', 'social_proof'],
                        weights: [40, 30, 30]
                    },
                    'cta_urgency': {
                        variants: ['standard', 'urgent', 'scarcity'],
                        weights: [50, 25, 25]
                    },
                    'service_ordering': {
                        variants: ['price_asc', 'price_desc', 'popularity'],
                        weights: [33, 33, 34]
                    }
                };
                
                this.userVariants = this.loadOrAssignVariants();
                this.applyVariants();
            }
            
            loadOrAssignVariants() {
                let variants = localStorage.getItem('ab_test_variants');
                if (variants) {
                    return JSON.parse(variants);
                }
                
                // Assign new variants
                variants = {};
                for (const [testName, config] of Object.entries(this.tests)) {
                    variants[testName] = this.selectVariant(config.variants, config.weights);
                }
                
                localStorage.setItem('ab_test_variants', JSON.stringify(variants));
                return variants;
            }
            
            selectVariant(variants, weights) {
                const random = Math.random() * 100;
                let cumulative = 0;
                
                for (let i = 0; i < variants.length; i++) {
                    cumulative += weights[i];
                    if (random <= cumulative) {
                        return variants[i];
                    }
                }
                
                return variants[0]; // Fallback
            }
            
            applyVariants() {
                // Apply pricing strategy variant
                this.applyPricingVariant();
                
                // Apply hero messaging variant  
                this.applyHeroVariant();
                
                // Apply CTA urgency variant
                this.applyCTAVariant();
                
                // Apply service ordering variant
                this.applyServiceOrderingVariant();
                
                // Track variant assignment
                this.trackVariantAssignment();
            }
            
            applyPricingVariant() {
                const variant = this.userVariants.pricing_strategy;
                
                if (variant === 'discount') {
                    // Already applied discount pricing in HTML
                    document.documentElement.style.setProperty('--pricing-highlight', '#e53e3e');
                } else if (variant === 'premium') {
                    // Remove discount messaging and increase prices by 20%
                    setTimeout(() => {
                        document.querySelectorAll('.service-price').forEach(el => {
                            const price = parseInt(el.textContent.replace(/[‚Ç¨.,]/g, ''));
                            el.textContent = '‚Ç¨' + Math.round(price * 1.2).toLocaleString();
                        });
                        
                        document.querySelectorAll('div[style*="Was ‚Ç¨"]').forEach(el => {
                            el.style.display = 'none';
                        });
                    }, 100);
                }
            }
            
            applyHeroVariant() {
                const variant = this.userVariants.hero_messaging;
                
                setTimeout(() => {
                    const subtitle = document.querySelector('.intro-subtitle');
                    if (!subtitle) return;
                    
                    switch (variant) {
                        case 'benefits':
                            subtitle.textContent = 'Verhoog je hiring success rate met 340% door onze AI-gedreven recruitment intelligence';
                            break;
                        case 'features':
                            subtitle.textContent = '29 expert vragen + sector modules + AI matching = Complete recruitment transformation';
                            break;
                        case 'social_proof':
                            subtitle.textContent = 'Gebruikt door 2,500+ HR leaders voor recruitment excellence in 2024';
                            break;
                    }
                }, 100);
            }
            
            applyCTAVariant() {
                const variant = this.userVariants.cta_urgency;
                
                setTimeout(() => {
                    const buttons = document.querySelectorAll('.cta-button');
                    buttons.forEach(button => {
                        switch (variant) {
                            case 'urgent':
                                if (button.textContent.includes('Start')) {
                                    button.innerHTML = '<i class="fas fa-bolt"></i> Start Nu - Laatste 48 Uur üî•';
                                }
                                break;
                            case 'scarcity':
                                if (button.textContent.includes('Start')) {
                                    button.innerHTML = '<i class="fas fa-users"></i> Join 127 Teams Deze Week üöÄ';
                                }
                                break;
                        }
                    });
                }, 100);
            }
            
            applyServiceOrderingVariant() {
                const variant = this.userVariants.service_ordering;
                
                setTimeout(() => {
                    const serviceGrid = document.querySelector('.services-grid');
                    if (!serviceGrid) return;
                    
                    const services = Array.from(serviceGrid.children);
                    
                    switch (variant) {
                        case 'price_asc':
                            // Order by price ascending (already default)
                            break;
                        case 'price_desc':
                            // Reverse order
                            services.reverse().forEach(service => serviceGrid.appendChild(service));
                            break;
                        case 'popularity':
                            // Move middle service (branding) to front
                            if (services.length >= 2) {
                                serviceGrid.insertBefore(services[1], services[0]);
                            }
                            break;
                    }
                }, 500);
            }
            
            trackVariantAssignment() {
                // Track variant assignment for analytics
                if (typeof gtag !== 'undefined') {
                    for (const [testName, variant] of Object.entries(this.userVariants)) {
                        gtag('event', 'ab_test_variant_assigned', {
                            event_category: 'ab_testing',
                            event_label: `${testName}:${variant}`,
                            custom_parameter_1: testName,
                            custom_parameter_2: variant
                        });
                    }
                }
                
                console.log('A/B Test Variants Assigned:', this.userVariants);
            }
            
            trackConversion(eventName, value = 0) {
                // Enhanced conversion tracking with A/B test context
                const conversionData = {
                    event: eventName,
                    value: value,
                    variants: this.userVariants,
                    timestamp: new Date().toISOString()
                };
                
                // Send to analytics
                if (typeof gtag !== 'undefined') {
                    gtag('event', eventName, {
                        event_category: 'ab_testing_conversion',
                        value: value,
                        custom_parameter_1: JSON.stringify(this.userVariants)
                    });
                }
                
                // Store conversion for analysis
                let conversions = JSON.parse(localStorage.getItem('ab_conversions') || '[]');
                conversions.push(conversionData);
                localStorage.setItem('ab_conversions', JSON.stringify(conversions.slice(-50))); // Keep last 50
                
                console.log('A/B Test Conversion Tracked:', conversionData);
            }
        }
        
        // Initialize A/B testing
        const abTest = new ABTestFramework();
        
        // Global variables
        let currentStep = 1;
        const sessionStartTime = Date.now();
        let formData = {
            companyName: '',
            contactName: '',
            companySize: '',
            sectorCategory: '',
            specificSector: '',
            assessmentAnswers: {},
            sectorAnswers: {},
            totalScore: 0,
            selectedService: '',
            contactEmail: '',
            contactPhone: '',
            contactMobile: '',
            challenge: '',
            privacyConsent: false
        };

        // Subsector mappings
        const subsectorMappings = {
            techniek: [
                { id: 'software_dev', name: 'Software Development', icon: 'üíª' },
                { id: 'it_infrastructure', name: 'IT Infrastructure', icon: 'üîß' },
                { id: 'data_analytics', name: 'Data & Analytics', icon: 'üìä' },
                { id: 'cybersecurity', name: 'Cybersecurity', icon: 'üîí' },
                { id: 'ai_ml', name: 'AI & Machine Learning', icon: 'ü§ñ' },
                { id: 'cloud_computing', name: 'Cloud Computing', icon: '‚òÅÔ∏è' }
            ],
            industrie: [
                { id: 'bouw_constructie', name: 'Bouw & Constructie', icon: 'üèóÔ∏è' },
                { id: 'installatietechniek', name: 'Installatietechniek (W/E/Klimaat)', icon: '‚ö°' },
                { id: 'metaalbewerking', name: 'Metaalbewerking & Industrie', icon: 'üîß' },
                { id: 'machinebouw', name: 'Machinebouw & Equipment', icon: '‚öôÔ∏è' },
                { id: 'hightech_elektronica', name: 'High-tech & Elektronica', icon: 'üì±' },
                { id: 'andere_technische', name: 'Andere technische sector', icon: 'üî¨' }
            ]
        };

        // 19-Question FlowMaster Assessment (same as before)
        const flowMasterQuestions = [
            {
                id: 'vraag1',
                text: 'Hoe lang duurt het gemiddeld voordat jullie een vacature succesvol hebben ingevuld?',
                options: [
                    { value: 1, text: 'Langer dan 4 maanden' },
                    { value: 2, text: '2-4 maanden' },
                    { value: 3, text: '1-2 maanden' },
                    { value: 4, text: '2-4 weken' },
                    { value: 5, text: 'Binnen 2 weken' }
                ]
            },
            {
                id: 'vraag2',
                text: 'Welke recruitment kanalen gebruiken jullie het meest effectief?',
                options: [
                    { value: 1, text: 'Alleen job boards' },
                    { value: 2, text: 'Job boards + LinkedIn' },
                    { value: 3, text: 'Multiple kanalen, niet geoptimaliseerd' },
                    { value: 4, text: 'Data-gedreven mix van kanalen' },
                    { value: 5, text: 'Geavanceerde multi-channel strategie' }
                ]
            },
            {
                id: 'vraag3',
                text: 'Hoe meten jullie de effectiviteit van jullie recruitment proces?',
                options: [
                    { value: 1, text: 'We meten niet structureel' },
                    { value: 2, text: 'Basis metrics zoals time-to-hire' },
                    { value: 3, text: 'Uitgebreide KPIs per kanaal' },
                    { value: 4, text: 'Real-time dashboard met alle metrics' },
                    { value: 5, text: 'Predictive analytics en forecasting' }
                ]
            },
            {
                id: 'vraag4',
                text: 'Hoe ervaren kandidaten jullie recruitment proces?',
                options: [
                    { value: 1, text: 'Weten we niet, geen feedback systeem' },
                    { value: 2, text: 'Incidentele feedback' },
                    { value: 3, text: 'Basis satisfaction surveys' },
                    { value: 4, text: 'Gestructureerde candidate experience tracking' },
                    { value: 5, text: 'Continue optimalisatie op basis van candidate feedback' }
                ]
            },
            {
                id: 'vraag5',
                text: 'Welke technologie gebruiken jullie voor recruitment?',
                options: [
                    { value: 1, text: 'Email en Excel' },
                    { value: 2, text: 'Basis ATS systeem' },
                    { value: 3, text: 'ATS + enkele ge√Øntegreerde tools' },
                    { value: 4, text: 'Ge√Øntegreerd recruitment tech stack' },
                    { value: 5, text: 'AI-gedreven recruitment platform' }
                ]
            },
            {
                id: 'vraag6',
                text: 'Hoe betrokken zijn hiring managers bij het recruitment proces?',
                options: [
                    { value: 1, text: 'Minimaal, alleen bij final interview' },
                    { value: 2, text: 'Bij schrijven job description en interviews' },
                    { value: 3, text: 'Actief bij screening en selectie' },
                    { value: 4, text: 'Volledig partner in het proces' },
                    { value: 5, text: 'Getraind en zelfstandig in recruitment' }
                ]
            },
            {
                id: 'vraag7',
                text: 'Hoe goed kennen jullie de arbeidsmarkt voor jullie doelgroepen?',
                options: [
                    { value: 1, text: 'Beperkte marktkennis' },
                    { value: 2, text: 'Basis begrip van salary ranges' },
                    { value: 3, text: 'Goede kennis van markt trends' },
                    { value: 4, text: 'Real-time market intelligence' },
                    { value: 5, text: 'Thought leadership in de markt' }
                ]
            },
            {
                id: 'vraag8',
                text: 'Hoe sterk is jullie employer brand positioning?',
                options: [
                    { value: 1, text: 'Geen bewuste employer branding' },
                    { value: 2, text: 'Basis company information online' },
                    { value: 3, text: 'Actieve employer brand ontwikkeling' },
                    { value: 4, text: 'Sterke, differenti√´rende employer brand' },
                    { value: 5, text: 'Award-winning employer brand' }
                ]
            },
            {
                id: 'vraag9',
                text: 'Welke recruitment strategie hanteren jullie?',
                options: [
                    { value: 1, text: 'Reactief, alleen bij vacatures' },
                    { value: 2, text: 'Basis workforce planning' },
                    { value: 3, text: 'Proactieve talent pipelining' },
                    { value: 4, text: 'Strategic workforce planning' },
                    { value: 5, text: 'Voorspellende talent intelligence' }
                ]
            },
            {
                id: 'vraag10',
                text: 'Hoe effectief is jullie screening proces?',
                options: [
                    { value: 1, text: 'Basis CV screening' },
                    { value: 2, text: 'Gestructureerde interviews' },
                    { value: 3, text: 'Competency-based assessments' },
                    { value: 4, text: 'Multi-method assessment center' },
                    { value: 5, text: 'AI-ondersteunde predictive screening' }
                ]
            },
            {
                id: 'vraag11',
                text: 'Hoe snel kunnen jullie schakelen bij urgente vacatures?',
                options: [
                    { value: 1, text: 'Geen verschil met normale proces' },
                    { value: 2, text: 'Enkele stappen kunnen worden versneld' },
                    { value: 3, text: 'Fast-track proces beschikbaar' },
                    { value: 4, text: 'Flexibel proces per urgentie niveau' },
                    { value: 5, text: 'Real-time talent mobilisatie' }
                ]
            },
            {
                id: 'vraag12',
                text: 'Welke data gebruiken jullie voor recruitment beslissingen?',
                options: [
                    { value: 1, text: 'Geen data-gedreven beslissingen' },
                    { value: 2, text: 'Basis recruitment metrics' },
                    { value: 3, text: 'Uitgebreide recruitment analytics' },
                    { value: 4, text: 'Predictive recruiting analytics' },
                    { value: 5, text: 'AI-gedreven decision support' }
                ]
            },
            {
                id: 'vraag13',
                text: 'Hoe goed is de kwaliteit van jullie nieuwe hires?',
                options: [
                    { value: 1, text: 'Veel mis-hires en vroeg vertrek' },
                    { value: 2, text: 'Gemiddelde performance nieuwe hires' },
                    { value: 3, text: 'Goede hire quality, enkele uitzonderingen' },
                    { value: 4, text: 'Consistent hoge kwaliteit hires' },
                    { value: 5, text: 'Nieuwe hires overtreffen verwachtingen' }
                ]
            },
            {
                id: 'vraag14',
                text: 'Hoe ontwikkelen jullie internal recruiting capabilities?',
                options: [
                    { value: 1, text: 'Geen specifieke training' },
                    { value: 2, text: 'Ad-hoc training bij problemen' },
                    { value: 3, text: 'Jaarlijks training programma' },
                    { value: 4, text: 'Continue learning & development' },
                    { value: 5, text: 'Center of excellence recruiting' }
                ]
            },
            {
                id: 'vraag15',
                text: 'Hoe goed werken jullie samen met externe recruitment partners?',
                options: [
                    { value: 1, text: 'Geen externe partners' },
                    { value: 2, text: 'Ad-hoc gebruik van bureaus' },
                    { value: 3, text: 'Vaste partners per specialisme' },
                    { value: 4, text: 'Strategic partnerships met SLAs' },
                    { value: 5, text: 'Ge√Øntegreerd ecosystem van partners' }
                ]
            },
            {
                id: 'vraag16',
                text: 'Welke rol speelt diversity & inclusion in jullie recruitment?',
                options: [
                    { value: 1, text: 'Geen specifieke D&I focus' },
                    { value: 2, text: 'Basis equal opportunity beleid' },
                    { value: 3, text: 'Actieve diversity recruiting' },
                    { value: 4, text: 'Gestructureerde D&I programma' },
                    { value: 5, text: 'D&I excellence en industry leadership' }
                ]
            },
            {
                id: 'vraag17',
                text: 'Hoe effectief is jullie onboarding proces?',
                options: [
                    { value: 1, text: 'Basis administratieve onboarding' },
                    { value: 2, text: 'Gestructureerd introductieprogramma' },
                    { value: 3, text: 'Role-specific onboarding tracks' },
                    { value: 4, text: 'Ge√Øntegreerd talent development' },
                    { value: 5, text: 'Best-in-class onboarding experience' }
                ]
            },
            {
                id: 'vraag18',
                text: 'Hoe goed anticiperen jullie op toekomstige talent behoeften?',
                options: [
                    { value: 1, text: 'Geen workforce forecasting' },
                    { value: 2, text: 'Basis headcount planning' },
                    { value: 3, text: 'Skills-based workforce planning' },
                    { value: 4, text: 'Scenario-based talent forecasting' },
                    { value: 5, text: 'AI-gedreven workforce intelligence' }
                ]
            },
            {
                id: 'vraag19',
                text: 'Wat is de ROI van jullie recruitment investering?',
                options: [
                    { value: 1, text: 'Weten we niet' },
                    { value: 2, text: 'Basis cost-per-hire tracking' },
                    { value: 3, text: 'ROI berekening per kanaal' },
                    { value: 4, text: 'Volledige talent acquisition ROI' },
                    { value: 5, text: 'Strategic value creation door recruiting' }
                ]
            },
            {
                id: 'vraag20',
                text: 'Hoe implementeren jullie AI en automation in jullie recruitment proces?',
                options: [
                    { value: 1, text: 'Geen AI implementatie' },
                    { value: 2, text: 'Basis CV parsing en keyword matching' },
                    { value: 3, text: 'AI-assisted candidate screening en ranking' },
                    { value: 4, text: 'Predictive analytics voor hiring success' },
                    { value: 5, text: 'Fully integrated AI recruitment ecosystem' }
                ]
            },
            {
                id: 'vraag21',
                text: 'Hoe addresseren jullie remote/hybrid work in jullie recruitment strategie?',
                options: [
                    { value: 1, text: 'Nog niet aangepast aan remote work' },
                    { value: 2, text: 'Basis remote interview processen' },
                    { value: 3, text: 'Gestructureerde virtual onboarding' },
                    { value: 4, text: 'Advanced remote collaboration assessment' },
                    { value: 5, text: 'Complete digital-first recruitment experience' }
                ]
            },
            {
                id: 'vraag22',
                text: 'Welke rol speelt employee advocacy in jullie talent acquisition?',
                options: [
                    { value: 1, text: 'Geen employee advocacy programma' },
                    { value: 2, text: 'Informal referral programma' },
                    { value: 3, text: 'Gestructureerde employee brand ambassadors' },
                    { value: 4, text: 'Social media employee advocacy campaigns' },
                    { value: 5, text: 'Advanced employee-driven talent community building' }
                ]
            },
            {
                id: 'vraag23',
                text: 'Hoe meten en verbeteren jullie inclusive recruitment practices?',
                options: [
                    { value: 1, text: 'Geen specific inclusion metrics' },
                    { value: 2, text: 'Basic diversity hiring statistics' },
                    { value: 3, text: 'Structured bias reduction in interview process' },
                    { value: 4, text: 'Advanced inclusive language en accessibility optimization' },
                    { value: 5, text: 'Comprehensive equity audit en continuous improvement' }
                ]
            },
            {
                id: 'vraag24',
                text: 'Hoe anticiperen jullie op skills-based hiring en future of work trends?',
                options: [
                    { value: 1, text: 'Focus alleen op tradicionale qualifications' },
                    { value: 2, text: 'Basis skills assessment naast diploma requirements' },
                    { value: 3, text: 'Gestructureerde competency-based hiring' },
                    { value: 4, text: 'Advanced skills prediction en reskilling programs' },
                    { value: 5, text: 'Future-proof talent acquisition met adaptability focus' }
                ]
            }
        ];

        // Sector-specific questions (mapped to new structure)
        const sectorQuestions = {
            software_dev: [
                {
                    id: 'tech_ai_adoption',
                    text: 'Hoe gebruikt jullie organisatie AI en automation in software development recruitment?',
                    options: [
                        { value: 1, text: 'Helemaal niet - traditionele methoden' },
                        { value: 2, text: 'Basis tools voor code screening' },
                        { value: 3, text: 'AI-assisted candidate matching' },
                        { value: 4, text: 'Geautomatiseerde technical assessments' },
                        { value: 5, text: 'Volledig AI-gedreven developer recruitment' }
                    ]
                },
                {
                    id: 'tech_skills_assessment',
                    text: 'Hoe evalueren jullie programming vaardigheden?',
                    options: [
                        { value: 1, text: 'Alleen portfolio review' },
                        { value: 2, text: 'Basic coding interviews' },
                        { value: 3, text: 'Online coding challenges' },
                        { value: 4, text: 'Live coding sessions + pair programming' },
                        { value: 5, text: 'Comprehensive tech assessments + real project work' }
                    ]
                },
                {
                    id: 'tech_sourcing',
                    text: 'Welke sourcing kanalen leveren jullie de beste developers op?',
                    options: [
                        { value: 1, text: 'Alleen job boards' },
                        { value: 2, text: 'LinkedIn + GitHub profiling' },
                        { value: 3, text: 'Developer communities + meetups' },
                        { value: 4, text: 'Open source contributions tracking' },
                        { value: 5, text: 'Multi-platform talent intelligence + referrals' }
                    ]
                },
                {
                    id: 'tech_retention',
                    text: 'Hoe behouden jullie top developer talent?',
                    options: [
                        { value: 1, text: 'Standaard HR beleid' },
                        { value: 2, text: 'Competitive salary + benefits' },
                        { value: 3, text: 'Learning budgets + conference tickets' },
                        { value: 4, text: 'Innovation time + career progression' },
                        { value: 5, text: 'Complete developer experience optimization' }
                    ]
                },
                {
                    id: 'tech_culture_fit',
                    text: 'Hoe beoordelen jullie cultural fit voor development teams?',
                    options: [
                        { value: 1, text: 'Basis gesprek met teamlead' },
                        { value: 2, text: 'Team interview sessies' },
                        { value: 3, text: 'Collaboration assessments' },
                        { value: 4, text: 'Trial periods + peer feedback' },
                        { value: 5, text: 'Comprehensive team dynamics evaluation' }
                    ]
                }
            ],
            bouw_constructie: [
                {
                    id: 'bouw_safety_regulations',
                    text: 'Hoe integreren jullie veiligheidsvoorschriften en certificeringen in bouw recruitment?',
                    options: [
                        { value: 1, text: 'Basis VCA certificaat check na aanname' },
                        { value: 2, text: 'Gestructureerde safety awareness screening' },
                        { value: 3, text: 'Uitgebreide veiligheidskennis assessment' },
                        { value: 4, text: 'Proactive safety culture evaluatie' },
                        { value: 5, text: 'Advanced safety leadership en risk management competentie' }
                    ]
                },
                {
                    id: 'bouw_technical_skills',
                    text: 'Hoe evalueren jullie technische vaardigheden en vakmanschap?',
                    options: [
                        { value: 1, text: 'Alleen diploma en referentie checks' },
                        { value: 2, text: 'Basis praktische vaardigheidstest' },
                        { value: 3, text: 'Gestructureerde technical skill assessment' },
                        { value: 4, text: 'Advanced project portfolio evaluatie' },
                        { value: 5, text: 'Comprehensive vakmanschap en innovatie competentie' }
                    ]
                },
                {
                    id: 'bouw_project_management',
                    text: 'Hoe screenen jullie op projectmanagement en planning vaardigheden?',
                    options: [
                        { value: 1, text: 'Geen specifieke projectmanagement focus' },
                        { value: 2, text: 'Basis planning en organisatie vragen' },
                        { value: 3, text: 'Gestructureerde project scenario assessment' },
                        { value: 4, text: 'Advanced bouwprojectmanagement evaluatie' },
                        { value: 5, text: 'Complex infrastructure project leadership competentie' }
                    ]
                },
                {
                    id: 'bouw_sustainability',
                    text: 'Hoe beoordelen jullie kennis van duurzaam bouwen en circulaire economie?',
                    options: [
                        { value: 1, text: 'Traditionele bouwmethoden alleen' },
                        { value: 2, text: 'Basis duurzaamheidsbewustzijn' },
                        { value: 3, text: 'Gestructureerde sustainable building assessment' },
                        { value: 4, text: 'Advanced circulaire bouw competentie' },
                        { value: 5, text: 'Innovative green building transformation leadership' }
                    ]
                },
                {
                    id: 'bouw_digitalization',
                    text: 'Hoe evalueren jullie digitale vaardigheden en BIM kennis?',
                    options: [
                        { value: 1, text: 'Traditionele tekenmethoden alleen' },
                        { value: 2, text: 'Basis CAD software kennis' },
                        { value: 3, text: 'Gestructureerde BIM competentie assessment' },
                        { value: 4, text: 'Advanced digital construction tools evaluatie' },
                        { value: 5, text: 'Digital transformation en smart construction leadership' }
                    ]
                }
            ],
            installatietechniek: [
                {
                    id: 'installatie_specialization',
                    text: 'Hoe screenen jullie op specialistische installatietechniek kennis (W/E/Klimaat)?',
                    options: [
                        { value: 1, text: 'Algemene technische kennis alleen' },
                        { value: 2, text: 'Basis specialisatie herkenning' },
                        { value: 3, text: 'Gestructureerde vakspecifieke assessment' },
                        { value: 4, text: 'Advanced multi-disciplinaire competentie' },
                        { value: 5, text: 'Expert-level specialization en innovation leadership' }
                    ]
                },
                {
                    id: 'installatie_smart_systems',
                    text: 'Hoe evalueren jullie kennis van smart building en IoT systemen?',
                    options: [
                        { value: 1, text: 'Traditionele installaties alleen' },
                        { value: 2, text: 'Basis smart systems awareness' },
                        { value: 3, text: 'Gestructureerde IoT en automation assessment' },
                        { value: 4, text: 'Advanced smart building integration competentie' },
                        { value: 5, text: 'Innovation in intelligent building systems leadership' }
                    ]
                },
                {
                    id: 'installatie_energy_efficiency',
                    text: 'Hoe beoordelen jullie kennis van energie-effici√´ntie en duurzaamheid?',
                    options: [
                        { value: 1, text: 'Standaard installatie focus alleen' },
                        { value: 2, text: 'Basis energiebewustzijn' },
                        { value: 3, text: 'Gestructureerde energie-effici√´ntie assessment' },
                        { value: 4, text: 'Advanced sustainable installation competentie' },
                        { value: 5, text: 'Energy transition en net-zero leadership expertise' }
                    ]
                },
                {
                    id: 'installatie_troubleshooting',
                    text: 'Hoe evalueren jullie troubleshooting en probleemoplossing vaardigheden?',
                    options: [
                        { value: 1, text: 'Basis technische gesprekken' },
                        { value: 2, text: 'Scenario-based problem solving' },
                        { value: 3, text: 'Gestructureerde diagnostic skills assessment' },
                        { value: 4, text: 'Advanced systematic troubleshooting evaluatie' },
                        { value: 5, text: 'Complex system diagnosis en innovation competentie' }
                    ]
                },
                {
                    id: 'installatie_compliance',
                    text: 'Hoe screenen jullie op kennis van voorschriften en certificeringen?',
                    options: [
                        { value: 1, text: 'Basis certificaat verificatie' },
                        { value: 2, text: 'Regelgeving awareness check' },
                        { value: 3, text: 'Gestructureerde compliance knowledge assessment' },
                        { value: 4, text: 'Advanced regulatory expertise evaluatie' },
                        { value: 5, text: 'Industry standards leadership en trend anticipation' }
                    ]
                }
            ],
            metaalbewerking: [
                {
                    id: 'metaal_manufacturing_processes',
                    text: 'Hoe evalueren jullie kennis van metaalbewerkingsprocessen en technieken?',
                    options: [
                        { value: 1, text: 'Basis handmatige bewerking kennis' },
                        { value: 2, text: 'Traditionele machinepark ervaring' },
                        { value: 3, text: 'Gestructureerde process knowledge assessment' },
                        { value: 4, text: 'Advanced manufacturing technology competentie' },
                        { value: 5, text: 'Innovation in metalworking processes leadership' }
                    ]
                },
                {
                    id: 'metaal_quality_control',
                    text: 'Hoe beoordelen jullie kwaliteitscontrole en precision engineering vaardigheden?',
                    options: [
                        { value: 1, text: 'Visuele inspectie alleen' },
                        { value: 2, text: 'Basis meetinstrument kennis' },
                        { value: 3, text: 'Gestructureerde quality assurance assessment' },
                        { value: 4, text: 'Advanced precision measurement competentie' },
                        { value: 5, text: 'Quality excellence en six sigma leadership expertise' }
                    ]
                },
                {
                    id: 'metaal_automation',
                    text: 'Hoe screenen jullie op kennis van geautomatiseerde productie en robotica?',
                    options: [
                        { value: 1, text: 'Handmatige productie focus alleen' },
                        { value: 2, text: 'Basis automation awareness' },
                        { value: 3, text: 'Gestructureerde robotics en automation assessment' },
                        { value: 4, text: 'Advanced smart manufacturing competentie' },
                        { value: 5, text: 'Industry 4.0 transformation leadership expertise' }
                    ]
                },
                {
                    id: 'metaal_materials_knowledge',
                    text: 'Hoe evalueren jullie materiaalkennis en innovatieve materiaaltoepassingen?',
                    options: [
                        { value: 1, text: 'Traditionele materialen kennis' },
                        { value: 2, text: 'Basis materiaaleigenschappen begrip' },
                        { value: 3, text: 'Gestructureerde materials science assessment' },
                        { value: 4, text: 'Advanced materials innovation competentie' },
                        { value: 5, text: 'New materials development en application leadership' }
                    ]
                },
                {
                    id: 'metaal_lean_manufacturing',
                    text: 'Hoe beoordelen jullie lean manufacturing en continuous improvement mindset?',
                    options: [
                        { value: 1, text: 'Traditionele productieaanpak' },
                        { value: 2, text: 'Basis efficiency bewustzijn' },
                        { value: 3, text: 'Gestructureerde lean principles assessment' },
                        { value: 4, text: 'Advanced continuous improvement competentie' },
                        { value: 5, text: 'Operational excellence en transformation leadership' }
                    ]
                }
            ],
            machinebouw: [
                {
                    id: 'machine_design_engineering',
                    text: 'Hoe evalueren jullie machine design en engineering competenties?',
                    options: [
                        { value: 1, text: 'Basis tekenlezen en constructie kennis' },
                        { value: 2, text: 'CAD software vaardigheden' },
                        { value: 3, text: 'Gestructureerde design engineering assessment' },
                        { value: 4, text: 'Advanced mechanical engineering competentie' },
                        { value: 5, text: 'Innovation in machine design leadership expertise' }
                    ]
                },
                {
                    id: 'machine_automation_control',
                    text: 'Hoe screenen jullie op automatisering en besturingstechniek kennis?',
                    options: [
                        { value: 1, text: 'Mechanische systemen alleen' },
                        { value: 2, text: 'Basis PLC programmering kennis' },
                        { value: 3, text: 'Gestructureerde automation technology assessment' },
                        { value: 4, text: 'Advanced control systems competentie' },
                        { value: 5, text: 'Smart machinery en IoT integration leadership' }
                    ]
                },
                {
                    id: 'machine_maintenance_optimization',
                    text: 'Hoe beoordelen jullie predictive maintenance en optimalisatie vaardigheden?',
                    options: [
                        { value: 1, text: 'Reactief onderhoud aanpak' },
                        { value: 2, text: 'Preventief onderhoud planning' },
                        { value: 3, text: 'Gestructureerde maintenance strategy assessment' },
                        { value: 4, text: 'Advanced predictive maintenance competentie' },
                        { value: 5, text: 'Maintenance excellence en digital transformation leadership' }
                    ]
                },
                {
                    id: 'machine_project_execution',
                    text: 'Hoe evalueren jullie complex machinebouw project management?',
                    options: [
                        { value: 1, text: 'Basis project planning ervaring' },
                        { value: 2, text: 'Multi-disciplinaire projectco√∂rdinatie' },
                        { value: 3, text: 'Gestructureerde project execution assessment' },
                        { value: 4, text: 'Advanced engineering project management competentie' },
                        { value: 5, text: 'Large-scale industrial project leadership expertise' }
                    ]
                },
                {
                    id: 'machine_innovation_development',
                    text: 'Hoe screenen jullie op machine innovation en R&D competenties?',
                    options: [
                        { value: 1, text: 'Traditionele machine concepten' },
                        { value: 2, text: 'Incrementele verbeteringen focus' },
                        { value: 3, text: 'Gestructureerde innovation assessment' },
                        { value: 4, text: 'Advanced R&D en breakthrough innovation competentie' },
                        { value: 5, text: 'Next-generation machinery development leadership' }
                    ]
                }
            ],
            hightech_elektronica: [
                {
                    id: 'hightech_semiconductor_knowledge',
                    text: 'Hoe evalueren jullie semiconductor en chip technology expertise?',
                    options: [
                        { value: 1, text: 'Basis elektronica kennis' },
                        { value: 2, text: 'Digitale en analoge circuits begrip' },
                        { value: 3, text: 'Gestructureerde semiconductor technology assessment' },
                        { value: 4, text: 'Advanced chip design en fabrication competentie' },
                        { value: 5, text: 'Next-generation semiconductor innovation leadership' }
                    ]
                },
                {
                    id: 'hightech_precision_manufacturing',
                    text: 'Hoe screenen jullie op cleanroom en precision manufacturing ervaring?',
                    options: [
                        { value: 1, text: 'Standaard productie omgeving ervaring' },
                        { value: 2, text: 'Basis cleanroom protocol kennis' },
                        { value: 3, text: 'Gestructureerde precision manufacturing assessment' },
                        { value: 4, text: 'Advanced cleanroom en nano-technology competentie' },
                        { value: 5, text: 'Ultra-precision manufacturing excellence leadership' }
                    ]
                },
                {
                    id: 'hightech_testing_validation',
                    text: 'Hoe beoordelen jullie testing, validation en kwaliteitsborging vaardigheden?',
                    options: [
                        { value: 1, text: 'Basis functionele testing' },
                        { value: 2, text: 'Gestructureerde test protocols' },
                        { value: 3, text: 'Advanced testing methodology assessment' },
                        { value: 4, text: 'Comprehensive validation en verification competentie' },
                        { value: 5, text: 'Quality excellence en testing innovation leadership' }
                    ]
                },
                {
                    id: 'hightech_emerging_technologies',
                    text: 'Hoe evalueren jullie kennis van emerging technologies (AI chips, quantum, etc.)?',
                    options: [
                        { value: 1, text: 'Traditionele elektronica focus' },
                        { value: 2, text: 'Basis emerging tech awareness' },
                        { value: 3, text: 'Gestructureerde future technology assessment' },
                        { value: 4, text: 'Advanced emerging technology competentie' },
                        { value: 5, text: 'Technology breakthrough en innovation leadership' }
                    ]
                },
                {
                    id: 'hightech_systems_integration',
                    text: 'Hoe screenen jullie op complex systems integration en architecture vaardigheden?',
                    options: [
                        { value: 1, text: 'Component-level focus alleen' },
                        { value: 2, text: 'Basis system design begrip' },
                        { value: 3, text: 'Gestructureerde systems engineering assessment' },
                        { value: 4, text: 'Advanced systems architecture competentie' },
                        { value: 5, text: 'Complex systems integration leadership expertise' }
                    ]
                }
            ],
            andere_technische: [
                {
                    id: 'andere_specialization',
                    text: 'Hoe identificeren jullie unieke technische specialisaties en niche expertise?',
                    options: [
                        { value: 1, text: 'Algemene technische screening alleen' },
                        { value: 2, text: 'Basis specialisatie herkenning' },
                        { value: 3, text: 'Gestructureerde niche expertise assessment' },
                        { value: 4, text: 'Advanced specialization competentie evaluatie' },
                        { value: 5, text: 'Deep expertise en thought leadership identification' }
                    ]
                },
                {
                    id: 'andere_innovation',
                    text: 'Hoe evalueren jullie innovation potential en adaptability in emerging tech fields?',
                    options: [
                        { value: 1, text: 'Traditionele technologie focus' },
                        { value: 2, text: 'Basis innovatie interesse' },
                        { value: 3, text: 'Gestructureerde innovation mindset assessment' },
                        { value: 4, text: 'Advanced emerging technology adaptability' },
                        { value: 5, text: 'Technology innovation leadership en trendsetting expertise' }
                    ]
                },
                {
                    id: 'andere_cross_disciplinary',
                    text: 'Hoe screenen jullie op cross-disciplinaire kennis en systeemdenken?',
                    options: [
                        { value: 1, text: 'Single discipline focus' },
                        { value: 2, text: 'Basic interdisciplinary awareness' },
                        { value: 3, text: 'Gestructureerde cross-functional assessment' },
                        { value: 4, text: 'Advanced systems thinking competentie' },
                        { value: 5, text: 'Complex multi-disciplinary integration leadership' }
                    ]
                },
                {
                    id: 'andere_research_development',
                    text: 'Hoe beoordelen jullie research & development en scientific methodology vaardigheden?',
                    options: [
                        { value: 1, text: 'Praktische implementatie focus alleen' },
                        { value: 2, text: 'Basic research experience' },
                        { value: 3, text: 'Gestructureerde R&D methodology assessment' },
                        { value: 4, text: 'Advanced scientific research competentie' },
                        { value: 5, text: 'Breakthrough research en innovation leadership expertise' }
                    ]
                },
                {
                    id: 'andere_future_tech',
                    text: 'Hoe evalueren jullie anticipatie op toekomstige technologische ontwikkelingen?',
                    options: [
                        { value: 1, text: 'Huidige technologie focus alleen' },
                        { value: 2, text: 'Basic future tech interest' },
                        { value: 3, text: 'Gestructureerde technology forecasting assessment' },
                        { value: 4, text: 'Advanced future technology vision competentie' },
                        { value: 5, text: 'Technology visionary en strategic foresight leadership' }
                    ]
                }
            ],
            energy: [
                {
                    id: 'energy_transition',
                    text: 'Hoe evalueren jullie kennis van energy transition en duurzaamheid?',
                    options: [
                        { value: 1, text: 'Geen specifieke sustainability screening' },
                        { value: 2, text: 'Basis renewable energy awareness' },
                        { value: 3, text: 'Gestructureerde ESG competentie assessment' },
                        { value: 4, text: 'Advanced carbon footprint en klimaat impact evaluatie' },
                        { value: 5, text: 'Comprehensive energy transition leadership competentie' }
                    ]
                },
                {
                    id: 'energy_technology',
                    text: 'Hoe screenen jullie op smart grid en IoT technologie kennis?',
                    options: [
                        { value: 1, text: 'Traditionele energie engineering alleen' },
                        { value: 2, text: 'Basis smart meter kennis' },
                        { value: 3, text: 'Gestructureerde IoT en connectivity assessment' },
                        { value: 4, text: 'Advanced data analytics en predictive maintenance' },
                        { value: 5, text: 'AI-driven energy optimization en grid intelligence competentie' }
                    ]
                },
                {
                    id: 'energy_regulatory',
                    text: 'Hoe beoordelen jullie regulatory en policy kennis in de energiesector?',
                    options: [
                        { value: 1, text: 'Basis compliance awareness' },
                        { value: 2, text: 'Energie wetgeving en markt mechanismen kennis' },
                        { value: 3, text: 'Gestructureerde regulatory framework assessment' },
                        { value: 4, text: 'Advanced policy development en stakeholder management' },
                        { value: 5, text: 'Comprehensive energy market transformation leadership' }
                    ]
                },
                {
                    id: 'energy_project_management',
                    text: 'Hoe evalueren jullie complex energy project management vaardigheden?',
                    options: [
                        { value: 1, text: 'Standaard project management interview' },
                        { value: 2, text: 'Energie project case studies' },
                        { value: 3, text: 'Gestructureerde multi-stakeholder project assessment' },
                        { value: 4, text: 'Advanced risk management en financial modeling' },
                        { value: 5, text: 'Comprehensive energy infrastructure transformation competentie' }
                    ]
                },
                {
                    id: 'energy_innovation',
                    text: 'Hoe screenen jullie op energy innovation en emerging technologies?',
                    options: [
                        { value: 1, text: 'Geen innovatie focus' },
                        { value: 2, text: 'Basis hydrogen en battery technology awareness' },
                        { value: 3, text: 'Gestructureerde clean tech assessment' },
                        { value: 4, text: 'Advanced energy storage en grid flexibility evaluatie' },
                        { value: 5, text: 'Breakthrough energy technology development competentie' }
                    ]
                }
            ],
            consulting: [
                {
                    id: 'consulting_problem_solving',
                    text: 'Hoe evalueren jullie structured problem solving vaardigheden?',
                    options: [
                        { value: 1, text: 'Standaard case interview' },
                        { value: 2, text: 'McKinsey-style case studies' },
                        { value: 3, text: 'Gestructureerde hypothesis-driven approach assessment' },
                        { value: 4, text: 'Advanced quantitative en qualitative analysis evaluatie' },
                        { value: 5, text: 'Comprehensive strategic thinking en synthesis competentie' }
                    ]
                },
                {
                    id: 'consulting_client_management',
                    text: 'Hoe beoordelen jullie client relationship en stakeholder management?',
                    options: [
                        { value: 1, text: 'Basis customer service assessment' },
                        { value: 2, text: 'Client presentation en communication skills' },
                        { value: 3, text: 'Gestructureerde stakeholder influence evaluatie' },
                        { value: 4, text: 'Advanced change management en buy-in creation' },
                        { value: 5, text: 'Executive presence en trusted advisor competentie' }
                    ]
                },
                {
                    id: 'consulting_industry_expertise',
                    text: 'Hoe screenen jullie op industry knowledge en domain expertise?',
                    options: [
                        { value: 1, text: 'Algemene business knowledge alleen' },
                        { value: 2, text: 'Sector-specifieke case studies' },
                        { value: 3, text: 'Gestructureerde industry trend analysis' },
                        { value: 4, text: 'Advanced competitive landscape en market dynamics' },
                        { value: 5, text: 'Thought leadership en industry transformation expertise' }
                    ]
                },
                {
                    id: 'consulting_digital_transformation',
                    text: 'Hoe evalueren jullie digital transformation consulting competenties?',
                    options: [
                        { value: 1, text: 'Traditionele business consulting alleen' },
                        { value: 2, text: 'Basis technology implementation kennis' },
                        { value: 3, text: 'Gestructureerde digital strategy assessment' },
                        { value: 4, text: 'Advanced data-driven transformation evaluatie' },
                        { value: 5, text: 'AI-powered business model innovation competentie' }
                    ]
                },
                {
                    id: 'consulting_delivery_excellence',
                    text: 'Hoe beoordelen jullie project delivery en quality management?',
                    options: [
                        { value: 1, text: 'Basis project management skills' },
                        { value: 2, text: 'Structured delivery methodology kennis' },
                        { value: 3, text: 'Gestructureerde quality assurance en peer review' },
                        { value: 4, text: 'Advanced agile consulting en rapid prototyping' },
                        { value: 5, text: 'Excellence in consulting methodology innovation' }
                    ]
                }
            ],
            manufacturing: [
                {
                    id: 'manufacturing_safety',
                    text: 'Hoe integreren jullie safety requirements in manufacturing recruitment?',
                    options: [
                        { value: 1, text: 'Safety briefing na aanname' },
                        { value: 2, text: 'Basis safety screening' },
                        { value: 3, text: 'Gestructureerde safety assessment' },
                        { value: 4, text: 'Predictive safety profiling' },
                        { value: 5, text: 'Advanced safety intelligence met behavior prediction' }
                    ]
                },
                {
                    id: 'manufacturing_technical',
                    text: 'Hoe evalueren jullie technische vaardigheden voor manufacturing roles?',
                    options: [
                        { value: 1, text: 'CV review en gesprek alleen' },
                        { value: 2, text: 'Basis praktische tests' },
                        { value: 3, text: 'Gestructureerde skill assessments' },
                        { value: 4, text: 'Simulation-based evaluaties' },
                        { value: 5, text: 'Advanced competency modeling met VR testing' }
                    ]
                },
                {
                    id: 'manufacturing_continuous',
                    text: 'Hoe identificeren jullie continuous improvement mindset bij kandidaten?',
                    options: [
                        { value: 1, text: 'Geen specifieke CI screening' },
                        { value: 2, text: 'Vragen over improvement ervaring' },
                        { value: 3, text: 'Gestructureerde CI competentie beoordeling' },
                        { value: 4, text: 'Lean Six Sigma knowledge testing' },
                        { value: 5, text: 'Advanced problem-solving simulations' }
                    ]
                },
                {
                    id: 'manufacturing_flexibility',
                    text: 'Hoe managen jullie shift work en workforce flexibility?',
                    options: [
                        { value: 1, text: 'Vaste shift assignments' },
                        { value: 2, text: 'Basis flexibiliteit screening' },
                        { value: 3, text: 'Gestructureerde flexibility assessment' },
                        { value: 4, text: 'Dynamic workforce optimization' },
                        { value: 5, text: 'AI-powered shift preference matching' }
                    ]
                },
                {
                    id: 'manufacturing_maintenance',
                    text: 'Hoe recruten jullie preventive maintenance talent?',
                    options: [
                        { value: 1, text: 'Algemene technical recruitment' },
                        { value: 2, text: 'Basis maintenance experience screening' },
                        { value: 3, text: 'Gespecialiseerde maintenance assessments' },
                        { value: 4, text: 'Predictive maintenance competentie evaluatie' },
                        { value: 5, text: 'Advanced IoT en digital maintenance expertise screening' }
                    ]
                }
            ]
            // Add other sectors as needed...
        };

        // Step navigation
        function nextStep() {
            if (validateCurrentStep()) {
                // Track step progression for A/B testing
                abTest.trackConversion(`step_${currentStep}_completed`, currentStep * 10);
                
                hideCurrentStep();
                currentStep++;
                showCurrentStep();
                updateProgress();
            }
        }

        function prevStep() {
            hideCurrentStep();
            currentStep--;
            showCurrentStep();
            updateProgress();
        }

        function hideCurrentStep() {
            document.getElementById(`step${currentStep}`).classList.add('hidden');
        }

        function showCurrentStep() {
            document.getElementById(`step${currentStep}`).classList.remove('hidden');
        }

        function updateProgress() {
            const progress = (currentStep - 1) / 9 * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `Stap ${currentStep} van 10`;
        }

        // Validation
        function validateCurrentStep() {
            switch(currentStep) {
                case 1:
                    return true;
                case 2:
                    return formData.companyName && formData.contactName && formData.companySize;
                case 3:
                    return formData.sectorCategory;
                case 4:
                    return formData.specificSector;
                case 5:
                    return Object.keys(formData.assessmentAnswers).length === 24;
                case 6:
                    return Object.keys(formData.sectorAnswers).length === 5;
                case 7:
                    return true;
                case 8:
                    return formData.selectedService;
                case 9:
                    return formData.contactEmail && formData.contactPhone && formData.privacyConsent;
                default:
                    return true;
            }
        }

        // Company size selection
        function selectSize(size) {
            document.querySelectorAll('.size-option').forEach(el => el.classList.remove('selected'));
            event.target.closest('.size-option').classList.add('selected');
            formData.companySize = size;
            
            formData.companyName = document.getElementById('companyName').value;
            formData.contactName = document.getElementById('contactName').value;
            
            updateStep2Button();
        }

        function updateStep2Button() {
            const button = document.getElementById('step2Next');
            const companyName = document.getElementById('companyName').value;
            const contactName = document.getElementById('contactName').value;
            
            if (companyName && contactName && formData.companySize) {
                button.disabled = false;
            } else {
                button.disabled = true;
            }
        }

        // Sector category selection
        function selectSectorCategory(category) {
            document.querySelectorAll('.sector-category').forEach(el => el.classList.remove('selected'));
            event.target.closest('.sector-category').classList.add('selected');
            formData.sectorCategory = category;
            document.getElementById('step3Next').disabled = false;
        }

        // Show subsector selection
        function showSubsectorSelection() {
            // Populate subsector options based on selected category
            const subsectors = subsectorMappings[formData.sectorCategory];
            const container = document.getElementById('subsectorOptions');
            const subtitle = document.getElementById('subsectorSubtitle');
            
            subtitle.textContent = `Kies de specifieke ${formData.sectorCategory} sector die het beste bij je organisatie past`;
            
            container.innerHTML = subsectors.map(subsector => `
                <div class="subsector-option" onclick="selectSubsector('${subsector.id}')">
                    <span style="margin-right: 10px;">${subsector.icon}</span>
                    ${subsector.name}
                </div>
            `).join('');
            
            nextStep();
        }

        function selectSubsector(sectorId) {
            document.querySelectorAll('.subsector-option').forEach(el => el.classList.remove('selected'));
            event.target.classList.add('selected');
            formData.specificSector = sectorId;
            document.getElementById('step4Next').disabled = false;
        }

        // Start assessment
        function startAssessment() {
            generateAssessmentQuestions();
            document.getElementById('scoreTracker').classList.remove('hidden');
            nextStep();
        }

        function generateAssessmentQuestions() {
            const container = document.getElementById('assessmentContainer');
            
            container.innerHTML = flowMasterQuestions.map((question, index) => `
                <div class="question-container">
                    <div class="question-number">${index + 1}</div>
                    <div class="question-text">${question.text}</div>
                    <div class="answer-options">
                        ${question.options.map(option => `
                            <div class="answer-option" onclick="selectAnswer('${question.id}', ${option.value}, this, 'assessment')">
                                <div class="option-number">${option.value}</div>
                                <div class="option-text">${option.text}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
            
            updateQuestionsProgress();
        }

        // Start sector questions
        function startSectorQuestions() {
            generateSectorQuestions();
            nextStep();
        }

        function generateSectorQuestions() {
            const questions = sectorQuestions[formData.specificSector] || sectorQuestions.software_dev; // fallback
            const container = document.getElementById('sectorQuestionsContainer');
            const title = document.getElementById('sectorAssessmentTitle');
            
            title.textContent = `${formData.specificSector.replace('_', ' ').toUpperCase()} Expertise Modules`;
            
            container.innerHTML = questions.map((question, index) => `
                <div class="question-container">
                    <div class="question-number">${index + 20}</div>
                    <div class="question-text">${question.text}</div>
                    <div class="answer-options">
                        ${question.options.map(option => `
                            <div class="answer-option" onclick="selectAnswer('${question.id}', ${option.value}, this, 'sector')">
                                <div class="option-number">${option.value}</div>
                                <div class="option-text">${option.text}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
            
            updateQuestionsProgress();
        }

        function selectAnswer(questionId, value, element, type) {
            element.parentNode.querySelectorAll('.answer-option').forEach(el => {
                el.classList.remove('selected');
            });
            
            element.classList.add('selected');
            
            if (type === 'assessment') {
                formData.assessmentAnswers[questionId] = value;
                document.getElementById('step5Next').disabled = Object.keys(formData.assessmentAnswers).length !== 24;
            } else {
                formData.sectorAnswers[questionId] = value;
                document.getElementById('step6Next').disabled = Object.keys(formData.sectorAnswers).length !== 5;
            }
            
            updateQuestionsProgress();
            updateTotalScore();
        }

        function updateQuestionsProgress() {
            const assessmentCount = Object.keys(formData.assessmentAnswers).length;
            const sectorCount = Object.keys(formData.sectorAnswers).length;
            const totalAnswered = assessmentCount + sectorCount;
            
            document.getElementById('questionsProgress').textContent = `${totalAnswered} van 29 vragen`;
        }

        function updateTotalScore() {
            const assessmentAnswers = Object.values(formData.assessmentAnswers);
            const sectorAnswers = Object.values(formData.sectorAnswers);
            const allAnswers = [...assessmentAnswers, ...sectorAnswers];
            
            const totalScore = allAnswers.reduce((sum, value) => sum + value, 0);
            const maxScore = allAnswers.length * 5;
            const percentage = maxScore > 0 ? Math.round((totalScore / maxScore) * 100) : 0;
            
            formData.totalScore = percentage;
            
            document.getElementById('scorePercentage').textContent = percentage + '%';
            
            const circle = document.getElementById('scoreCircle');
            const degrees = (percentage / 100) * 360;
            circle.style.background = `conic-gradient(var(--secondary) 0deg, var(--secondary) ${degrees}deg, var(--gray-200) ${degrees}deg, var(--gray-200) 360deg)`;
            
            const labels = {
                90: 'Expert Niveau',
                75: 'Gevorderd Niveau', 
                60: 'Gemiddeld Niveau',
                40: 'Basis Niveau',
                0: 'Starter Niveau'
            };
            
            let label = 'Starter Niveau';
            for (const [threshold, text] of Object.entries(labels)) {
                if (percentage >= parseInt(threshold)) {
                    label = text;
                    break;
                }
            }
            
            document.getElementById('scoreLabel').textContent = label;
        }

        // Generate results and candidates
        function generateResults() {
            const candidates = getCandidatesForSector(formData.specificSector, formData.totalScore);
            const container = document.getElementById('candidateCards');
            
            container.innerHTML = candidates.map(candidate => `
                <div class="candidate-card">
                    <div class="candidate-header">
                        <div class="candidate-avatar">${candidate.initials}</div>
                        <div class="candidate-info">
                            <h4>${candidate.name}</h4>
                            <div class="candidate-role">${candidate.role}</div>
                        </div>
                    </div>
                    <div class="candidate-skills">
                        ${candidate.skills.map(skill => `<span class="skill-tag">${skill}</span>`).join('')}
                    </div>
                    <div class="match-score">
                        <div class="score-bar">
                            <div class="score-fill" style="width: ${candidate.match}%"></div>
                        </div>
                        <div class="score-text">${candidate.match}% match</div>
                    </div>
                </div>
            `).join('');
            
            nextStep();
        }

        function getCandidatesForSector(sector, score) {
            // Enhanced matching algorithm with sector-specific weighting
            const baseQualityBonus = Math.floor(score / 20) * 3;
            
            // Sector-specific scoring multipliers based on assessment complexity
            const sectorMultipliers = {
                'software_dev': 1.0,
                'bouw_constructie': 1.1,        // Complex projects and safety requirements
                'installatietechniek': 1.15,    // High specialization W/E/Klimaat
                'metaalbewerking': 1.0,         // Traditional manufacturing
                'machinebouw': 1.2,             // High-tech engineering complexity
                'hightech_elektronica': 1.3,   // Highest complexity - semiconductors
                'andere_technische': 1.25,     // Innovation and cross-disciplinary
                'energy': 1.1,                 // Complex infrastructure projects
                'consulting': 1.25,            // Strategic complexity
                'manufacturing': 1.0,
                'it_infrastructure': 1.05,
                'data_analytics': 1.1,
                'cybersecurity': 1.2,
                'ai_ml': 1.3,
                'cloud_computing': 1.1
            };
            
            const sectorMultiplier = sectorMultipliers[sector] || 1.0;
            const qualityBonus = Math.floor(baseQualityBonus * sectorMultiplier);
            
            // Company size impact on candidate matching
            const sizeMultiplier = {
                '1-10': 0.95,      // Startups may get slightly lower matches
                '11-50': 1.0,      // Scale-ups get standard matching
                '51-200': 1.05,    // Mid-size companies get slight bonus
                '201-500': 1.1,    // Large companies get good bonus
                '500+': 1.15       // Enterprise gets highest bonus
            };
            
            const companySizeBonus = Math.floor(qualityBonus * (sizeMultiplier[formData.companySize] || 1.0));
            const finalQualityBonus = Math.min(companySizeBonus, 10); // Cap at 10 points
            
            const candidateDb = {
                software_dev: [
                    {
                        name: 'Sarah van der Berg',
                        initials: 'SB',
                        role: 'Senior Frontend Developer',
                        skills: ['React', 'TypeScript', 'Node.js', 'AWS'],
                        match: Math.min(94 + finalQualityBonus, 98)
                    },
                    {
                        name: 'Kevin Janssen', 
                        initials: 'KJ',
                        role: 'Full Stack Developer',
                        skills: ['Python', 'Django', 'React', 'Docker'],
                        match: Math.min(89 + finalQualityBonus, 96)
                    },
                    {
                        name: 'Lisa Chen',
                        initials: 'LC',
                        role: 'Software Architect',
                        skills: ['Microservices', 'Cloud Architecture', 'Leadership', 'DevOps'],
                        match: Math.min(92 + finalQualityBonus, 97)
                    }
                ],
                manufacturing: [
                    {
                        name: 'Peter Willems',
                        initials: 'PW',
                        role: 'Production Engineer',
                        skills: ['Lean Manufacturing', 'AutoCAD', 'Quality Control', 'ISO'],
                        match: Math.min(89 + finalQualityBonus, 94)
                    },
                    {
                        name: 'Sandra Koster',
                        initials: 'SK',
                        role: 'Operations Manager',
                        skills: ['Six Sigma', 'ERP', 'Team Leadership', 'Continuous Improvement'],
                        match: Math.min(93 + finalQualityBonus, 98)
                    },
                    {
                        name: 'Dennis Bruin',
                        initials: 'DB',
                        role: 'Maintenance Technician',
                        skills: ['PLC Programming', 'Electrical Systems', 'Preventive Maintenance', 'Safety'],
                        match: Math.min(87 + finalQualityBonus, 92)
                    }
                ],
                bouw_constructie: [
                    {
                        name: 'Jeroen van der Meer',
                        initials: 'JM',
                        role: 'Senior Projectleider Bouw',
                        skills: ['Projectmanagement', 'VCA', 'BIM', 'Duurzaam Bouwen'],
                        match: Math.min(92 + finalQualityBonus, 97)
                    },
                    {
                        name: 'Sandra Bakker',
                        initials: 'SB',
                        role: 'Uitvoerder Woningbouw',
                        skills: ['Planning', 'Kwaliteitscontrole', 'Veiligheid', 'Teamleiding'],
                        match: Math.min(89 + finalQualityBonus, 94)
                    },
                    {
                        name: 'Mike de Groot',
                        initials: 'MG',
                        role: 'BIM Co√∂rdinator',
                        skills: ['AutoCAD', 'Revit', 'Tekenen', 'Digitale Constructie'],
                        match: Math.min(90 + finalQualityBonus, 95)
                    }
                ],
                installatietechniek: [
                    {
                        name: 'Rob Hendriks',
                        initials: 'RH',
                        role: 'Installatie Engineer W/E',
                        skills: ['Elektrotechniek', 'Klimaatinstallaties', 'PLC', 'Domotica'],
                        match: Math.min(94 + finalQualityBonus, 98)
                    },
                    {
                        name: 'Anita Visser',
                        initials: 'AV',
                        role: 'Service Technicus',
                        skills: ['Onderhoud', 'Troubleshooting', 'Klimaattechniek', 'IoT Systemen'],
                        match: Math.min(91 + finalQualityBonus, 96)
                    },
                    {
                        name: 'Dennis Smits',
                        initials: 'DS',
                        role: 'Projectleider Installaties',
                        skills: ['Projectmanagement', 'Installatieberekeningen', 'Energiebeheersystemen', 'Smart Building'],
                        match: Math.min(88 + finalQualityBonus, 93)
                    }
                ],
                metaalbewerking: [
                    {
                        name: 'Frank van Dijk',
                        initials: 'FD',
                        role: 'CNC Programmeur',
                        skills: ['CNC Programmeren', 'CAM Software', 'Kwaliteitscontrole', 'Lean Manufacturing'],
                        match: Math.min(93 + finalQualityBonus, 97)
                    },
                    {
                        name: 'Patricia Koster',
                        initials: 'PK',
                        role: 'Productie Manager',
                        skills: ['Productieoptimalisatie', 'Six Sigma', 'Teamleiding', 'Proces Verbetering'],
                        match: Math.min(87 + finalQualityBonus, 92)
                    },
                    {
                        name: 'Jan Willems',
                        initials: 'JW',
                        role: 'Lasser/Constructeur',
                        skills: ['TIG/MIG Lassen', 'Constructietekeningen', 'Kwaliteitsborging', 'Robotlassen'],
                        match: Math.min(90 + finalQualityBonus, 95)
                    }
                ],
                machinebouw: [
                    {
                        name: 'Erik Jansen',
                        initials: 'EJ',
                        role: 'Design Engineer',
                        skills: ['SolidWorks', 'Machine Design', 'FEM Analyse', 'Innovatie'],
                        match: Math.min(94 + finalQualityBonus, 98)
                    },
                    {
                        name: 'Marieke van Berg',
                        initials: 'MB',
                        role: 'Commissioning Engineer',
                        skills: ['Inbedrijfstelling', 'Automatisering', 'Klantcontact', 'Internationale Projecten'],
                        match: Math.min(91 + finalQualityBonus, 96)
                    },
                    {
                        name: 'Thomas de Wit',
                        initials: 'TW',
                        role: 'Service Engineer',
                        skills: ['Onderhoud', 'Modificaties', 'Klantservice', 'Technische Documentatie'],
                        match: Math.min(88 + finalQualityBonus, 93)
                    }
                ],
                hightech_elektronica: [
                    {
                        name: 'Lisa Chen',
                        initials: 'LC',
                        role: 'Process Engineer Semiconductors',
                        skills: ['Cleanroom', 'Lithografie', 'Kwaliteitscontrole', 'Procesoptimalisatie'],
                        match: Math.min(95 + finalQualityBonus, 98)
                    },
                    {
                        name: 'Steven Vermeulen',
                        initials: 'SV',
                        role: 'Test Engineer Electronics',
                        skills: ['Testautomatisering', 'PCB Design', 'Signal Integrity', 'EMC Testing'],
                        match: Math.min(92 + finalQualityBonus, 97)
                    },
                    {
                        name: 'Priya Patel',
                        initials: 'PP',
                        role: 'R&D Engineer',
                        skills: ['Chip Design', 'FPGA', 'Embedded Systems', 'AI Hardware'],
                        match: Math.min(89 + finalQualityBonus, 94)
                    }
                ],
                andere_technische: [
                    {
                        name: 'Marco Scholten',
                        initials: 'MS',
                        role: 'Innovation Engineer',
                        skills: ['R&D', 'Prototyping', 'Cross-functioneel', 'Emerging Tech'],
                        match: Math.min(91 + finalQualityBonus, 96)
                    },
                    {
                        name: 'Anouk Brouwer',
                        initials: 'AB',
                        role: 'Technical Consultant',
                        skills: ['Technische Analyse', 'Systeemdenken', 'Klantadvies', 'Innovatie'],
                        match: Math.min(88 + finalQualityBonus, 93)
                    },
                    {
                        name: 'David Kim',
                        initials: 'DK',
                        role: 'Research Scientist',
                        skills: ['Wetenschappelijk Onderzoek', 'Data Analyse', 'Technologie Trends', 'Publicaties'],
                        match: Math.min(94 + finalQualityBonus, 98)
                    }
                ],
                energy: [
                    {
                        name: 'Pieter Groot',
                        initials: 'PG',
                        role: 'Renewable Energy Engineer',
                        skills: ['Solar Power', 'Wind Energy', 'Grid Integration', 'Sustainability'],
                        match: Math.min(91 + finalQualityBonus, 96)
                    },
                    {
                        name: 'Ingrid Bakker',
                        initials: 'IB',
                        role: 'Energy Transition Manager',
                        skills: ['Policy Development', 'ESG', 'Project Management', 'Stakeholder Management'],
                        match: Math.min(89 + finalQualityBonus, 94)
                    },
                    {
                        name: 'Joris de Wit',
                        initials: 'JW',
                        role: 'Smart Grid Specialist',
                        skills: ['IoT', 'Data Analytics', 'Network Optimization', 'Cybersecurity'],
                        match: Math.min(92 + finalQualityBonus, 97)
                    }
                ],
                consulting: [
                    {
                        name: 'Alexandra van Berg',
                        initials: 'AB',
                        role: 'Management Consultant',
                        skills: ['Strategy Development', 'Change Management', 'Business Analysis', 'Leadership'],
                        match: Math.min(94 + finalQualityBonus, 98)
                    },
                    {
                        name: 'Martijn Scholten',
                        initials: 'MS',
                        role: 'Digital Transformation Lead',
                        skills: ['Process Optimization', 'Technology Implementation', 'Agile Coaching', 'Data Strategy'],
                        match: Math.min(91 + finalQualityBonus, 96)
                    },
                    {
                        name: 'Nathalie Koster',
                        initials: 'NK',
                        role: 'HR Advisory Consultant',
                        skills: ['Organizational Design', 'Talent Strategy', 'Performance Management', 'Culture Change'],
                        match: Math.min(88 + finalQualityBonus, 93)
                    }
                ]
            };
            
            return candidateDb[sector] || candidateDb.software_dev;
        }

        // Service selection (1 service)
        function selectService(serviceId) {
            document.querySelectorAll('.service-card').forEach(el => el.classList.remove('selected'));
            event.target.closest('.service-card').classList.add('selected');
            formData.selectedService = serviceId;
            
            // Track service selection for A/B testing
            const servicePrices = { 'optimization': 3497, 'branding': 2297, 'intelligence': 1497 };
            abTest.trackConversion('service_selected', servicePrices[serviceId] || 0);
            
            updateServiceCounter();
        }

        function updateServiceCounter() {
            document.getElementById('selectedCount').textContent = formData.selectedService ? '1' : '0';
            document.getElementById('step8Next').disabled = !formData.selectedService;
        }

        // Privacy consent - Fixed
        function handlePrivacyChange() {
            const checkbox = document.getElementById('privacyConsent');
            formData.privacyConsent = checkbox.checked;
            updateSubmitButton();
            console.log('Privacy consent:', formData.privacyConsent);
        }

        function updateSubmitButton() {
            const email = document.getElementById('contactEmail').value;
            const phone = document.getElementById('contactPhone').value;
            const button = document.getElementById('submitButton');
            
            if (email && phone && formData.privacyConsent) {
                button.disabled = false;
            } else {
                button.disabled = true;
            }
        }

        // Form submission - FIXED
        function submitForm() {
            console.log('submitForm called');
            
            formData.contactEmail = document.getElementById('contactEmail').value;
            formData.contactPhone = document.getElementById('contactPhone').value;
            formData.contactMobile = document.getElementById('contactMobile').value;
            formData.challenge = document.getElementById('challenge').value;
            
            if (!formData.contactEmail || !formData.contactPhone || !formData.privacyConsent) {
                alert('Vul alle verplichte velden in en ga akkoord met het privacybeleid.');
                return;
            }
            
            // Update button state
            const submitBtn = document.getElementById('submitButton');
            submitBtn.innerHTML = '<div class="loading-spinner"></div>';
            submitBtn.disabled = true;
            
            setTimeout(() => {
                try {
                    // Update final data
                    document.getElementById('finalName').textContent = formData.contactName;
                    document.getElementById('finalCompany').textContent = formData.companyName;
                    document.getElementById('finalScore').textContent = formData.totalScore;
                    
                    // Track final conversion for A/B testing
                    const leadScore = calculateLeadScore(formData);
                    abTest.trackConversion('assessment_completed', leadScore);
                    
                    // Submit to backend
                    submitToBackend(formData);
                    
                    // Force show bedankpagina (step 10)
                    console.log('Showing step 10 (bedankpagina)');
                    hideCurrentStep();
                    currentStep = 10;
                    showCurrentStep();
                    updateProgress();
                    
                } catch (error) {
                    console.error('Error in submitForm:', error);
                    alert('Er is een fout opgetreden. Probeer het opnieuw.');
                    submitBtn.innerHTML = 'Plan Mijn Strategy Call üöÄ';
                    submitBtn.disabled = false;
                }
            }, 2000);
        }

        function submitToBackend(data) {
            console.log('Submitting enhanced assessment data:', data);
            
            // Generate comprehensive data payload for CRM integration
            const zapierPayload = generateZapierPayload(data);
            const pipeDrivePayload = generatePipeDrivePayload(data);
            const emailTemplateData = generateEmailTemplateData(data);
            
            // Store session data
            sessionStorage.setItem('flowmasterAssessment', JSON.stringify(zapierPayload));
            
            // PipeDrive Configuration
            const PIPEDRIVE_CONFIG = {
                domain: 'recruitinbv.pipedrive.com',
                api_token: '88cd82ae86166b5d43174dc5bea91f5f6479ac09',
                pipeline_id: 1, // Main recruitment pipeline
                default_stage_id: 1, // Initial lead stage
                owner_id: null // Auto-assign to account owner
            };

            // Multiple webhook endpoints for different integrations
            const integrations = {
                zapier_main: 'https://hooks.zapier.com/hooks/catch/23933997/uusfai9/',
                pipedrive_sync: 'https://hooks.zapier.com/hooks/catch/23933997/uusfai9/',
                email_automation: 'https://hooks.zapier.com/hooks/catch/23933997/uusfai9/',
                backup_storage: 'https://hooks.zapier.com/hooks/catch/23933997/uusfai9/'
            };
            
            // Send to Zapier main webhook with full data (with no-cors fallback)
            fetch(integrations.zapier_main, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(zapierPayload),
                mode: 'no-cors'
            }).then(response => {
                if (response.ok) {
                    console.log('Zapier main webhook successful');
                    
                    // Send PipeDrive specific data
                    return fetch(integrations.pipedrive_sync, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(pipeDrivePayload),
                        mode: 'no-cors'
                    });
                } else {
                    throw new Error('Zapier main webhook failed');
                }
            }).then(response => {
                if (response.ok) {
                    console.log('PipeDrive sync successful');
                    
                    // Send email template data
                    return fetch(integrations.email_automation, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(emailTemplateData)
                    });
                } else {
                    console.log('PipeDrive sync failed, continuing...');
                }
            }).then(response => {
                if (response && response.ok) {
                    console.log('Email automation triggered successfully');
                }
                
                // Track conversion
                trackConversion('assessment_completed', zapierPayload.leadScore);
                
            }).catch(error => {
                console.log('Integration error, using backup:', error);
                
                // Fallback to backup webhook with all data
                fetch(integrations.backup_storage, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        zapier: zapierPayload,
                        pipedrive: pipeDrivePayload,
                        email: emailTemplateData,
                        error: error.message
                    })
                }).catch(backupError => {
                    console.log('Backup webhook error:', backupError);
                    
                    // Final fallback - store locally for later retry
                    const pendingData = {
                        zapier: zapierPayload,
                        pipedrive: pipeDrivePayload,
                        email: emailTemplateData,
                        timestamp: new Date().toISOString(),
                        retryCount: 0,
                        lastAttempt: new Date().toISOString()
                    };
                    
                    localStorage.setItem('pendingSubmission', JSON.stringify(pendingData));
                    
                    // Schedule retry attempt
                    setTimeout(() => {
                        retryPendingSubmissions();
                    }, 30000); // Retry after 30 seconds
                });
            });
            
            // Enhanced analytics tracking
            if (typeof gtag !== 'undefined') {
                // Main assessment completion event
                gtag('event', 'assessment_completed', {
                    event_category: 'lead_generation',
                    event_label: zapierPayload.industry,
                    value: zapierPayload.leadScore,
                    custom_parameter_1: zapierPayload.leadTags.join(','),
                    custom_parameter_2: zapierPayload.companyMaturity,
                    company_size: zapierPayload.companySizeCategory,
                    service_selected: zapierPayload.selectedService,
                    urgency_level: zapierPayload.urgencyLevel,
                    completion_rate: zapierPayload.completionRate
                });
                
                // Lead quality event
                gtag('event', 'lead_qualified', {
                    event_category: 'lead_scoring',
                    event_label: zapierPayload.leadGrade,
                    value: zapierPayload.leadScore,
                    lead_grade: zapierPayload.leadGrade,
                    priority_level: zapierPayload.priorityLevel
                });
                
                // Sector-specific tracking
                gtag('event', 'sector_assessment', {
                    event_category: 'sector_analysis',
                    event_label: zapierPayload.specificSector,
                    sector_category: zapierPayload.industry,
                    sector_display_name: zapierPayload.sectorDisplayName,
                    maturity_level: zapierPayload.companyMaturity
                });
                
                // Service interest tracking
                if (zapierPayload.selectedService) {
                    gtag('event', 'service_interest', {
                        event_category: 'service_selection',
                        event_label: zapierPayload.selectedService,
                        value: zapierPayload.estimatedValue,
                        service_display_name: zapierPayload.serviceDisplayName
                    });
                }
                
                // User journey tracking
                gtag('event', 'user_journey_completed', {
                    event_category: 'user_experience',
                    session_id: zapierPayload.sessionId,
                    completion_time_seconds: Math.round((Date.now() - sessionStartTime) / 1000),
                    ab_test_variants: JSON.stringify(zapierPayload.abTestVariants),
                    user_agent: navigator.userAgent.substring(0, 100)
                });
            }
            
            // Trigger PDF generation
            setTimeout(() => {
                generateProfessionalPDF(zapierPayload);
            }, 1000);
        }
        
        function generateZapierPayload(data) {
            const leadTags = generateLeadTags(data);
            const leadScore = calculateLeadScore(data);
            const companyMaturity = getMaturityLevel(data.totalScore);
            
            return {
                // Core identification
                timestamp: new Date().toISOString(),
                sessionId: sessionStorage.getItem('sessionId') || generateSessionId(),
                source: 'FlowMaster Pro V4 Advanced Assessment',
                
                // Company data
                companyName: data.companyName,
                companySize: data.companySize,
                companySizeCategory: getCompanySizeCategory(data.companySize),
                industry: data.sectorCategory,
                specificSector: data.specificSector,
                sectorDisplayName: getSectorDisplayName(data.specificSector),
                
                // Contact data
                contactName: data.contactName,
                contactEmail: data.contactEmail,
                contactPhone: data.contactPhone,
                contactMobile: data.contactMobile,
                
                // Assessment results
                totalScore: data.totalScore,
                companyMaturity: companyMaturity,
                maturityLevel: getMaturityDescription(companyMaturity),
                assessmentAnswers: data.assessmentAnswers,
                sectorAnswers: data.sectorAnswers,
                totalQuestions: 29,
                completionRate: ((Object.keys(data.assessmentAnswers).length + Object.keys(data.sectorAnswers).length) / 29 * 100).toFixed(1),
                
                // Lead qualification
                leadScore: leadScore,
                leadGrade: getLeadGrade(leadScore),
                leadTags: leadTags,
                urgencyLevel: assessUrgencyLevel(data.challenge),
                challenge: data.challenge,
                
                // Service selection
                selectedService: data.selectedService,
                serviceDisplayName: getServiceDisplayName(data.selectedService),
                estimatedValue: getServiceValue(data.selectedService),
                
                // Technical metadata
                userAgent: navigator.userAgent,
                screenResolution: `${screen.width}x${screen.height}`,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                language: navigator.language,
                referrer: document.referrer,
                
                // A/B testing context
                abTestVariants: abTest ? abTest.userVariants : {},
                
                // Follow-up data
                nextActionRecommended: getNextActionRecommendation(leadScore, companyMaturity),
                priorityLevel: getPriorityLevel(leadScore, data.urgencyLevel),
                estimatedCloseDate: getEstimatedCloseDate(leadScore, data.urgencyLevel)
            };
        }
        
        // PipeDrive Integration Functions
        function generatePipeDrivePayload(data) {
            const leadScore = calculateLeadScore(data);
            const companyMaturity = getMaturityLevel(data.totalScore);
            const leadTags = generateLeadTags(data);
            
            return {
                // PipeDrive Configuration
                pipedrive_domain: PIPEDRIVE_CONFIG.domain,
                pipedrive_api_token: PIPEDRIVE_CONFIG.api_token,
                pipeline_id: PIPEDRIVE_CONFIG.pipeline_id,
                stage_id: PIPEDRIVE_CONFIG.default_stage_id,
                
                // PipeDrive Person fields
                person_name: data.contactName,
                person_email: data.contactEmail,
                person_phone: data.contactPhone,
                person_mobile: data.contactMobile,
                
                // PipeDrive Organization fields
                org_name: data.companyName,
                org_size: data.companySize,
                org_industry: getSectorDisplayName(data.specificSector),
                
                // PipeDrive Deal fields
                deal_title: `FlowMaster Assessment - ${data.companyName}`,
                deal_value: getServiceValue(data.selectedService),
                deal_currency: 'EUR',
                deal_stage: getDealStage(leadScore),
                deal_probability: getDealProbability(leadScore),
                deal_expected_close_date: getEstimatedCloseDate(leadScore, assessUrgencyLevel(data.challenge)),
                
                // Custom Fields for PipeDrive
                custom_assessment_score: data.totalScore,
                custom_lead_score: leadScore,
                custom_maturity_level: companyMaturity,
                custom_sector_category: data.sectorCategory,
                custom_specific_sector: data.specificSector,
                custom_company_size_category: getCompanySizeCategory(data.companySize),
                custom_urgency_level: assessUrgencyLevel(data.challenge),
                custom_selected_service: data.selectedService,
                custom_completion_rate: ((Object.keys(data.assessmentAnswers).length + Object.keys(data.sectorAnswers).length) / 29 * 100).toFixed(1),
                custom_session_id: sessionStorage.getItem('sessionId'),
                custom_assessment_date: new Date().toISOString().split('T')[0],
                custom_challenge_description: data.challenge,
                custom_ab_test_variants: JSON.stringify(abTest ? abTest.userVariants : {}),
                
                // Lead Tags for PipeDrive
                tags: leadTags.join(', '),
                
                // Activities to create
                activities: [
                    {
                        type: 'assessment_completed',
                        subject: `FlowMaster Assessment voltooid door ${data.contactName}`,
                        note: `Assessment Score: ${data.totalScore}%\nLead Score: ${leadScore}\nMaturity Level: ${companyMaturity}\nGeselecteerde Service: ${getServiceDisplayName(data.selectedService)}\nUitdaging: ${data.challenge || 'Niet opgegeven'}`,
                        due_date: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString().split('T')[0]
                    }
                ],
                
                // Notes
                notes: [
                    {
                        content: `FlowMaster Pro Assessment Resultaten:\n\n` +
                                `üè¢ Bedrijf: ${data.companyName} (${data.companySize} medewerkers)\n` +
                                `üë§ Contact: ${data.contactName}\n` +
                                `üìß Email: ${data.contactEmail}\n` +
                                `üì± Telefoon: ${data.contactPhone}\n\n` +
                                `üìä Assessment Score: ${data.totalScore}%\n` +
                                `üéØ Lead Score: ${leadScore}/300\n` +
                                `üìà Maturity Level: ${companyMaturity}\n` +
                                `üè≠ Sector: ${getSectorDisplayName(data.specificSector)}\n` +
                                `‚ö° Urgentie: ${assessUrgencyLevel(data.challenge)}\n` +
                                `üíº Service Interest: ${getServiceDisplayName(data.selectedService)}\n\n` +
                                `üîç Uitdaging: ${data.challenge || 'Niet opgegeven'}\n\n` +
                                `üè∑Ô∏è Tags: ${leadTags.join(', ')}\n` +
                                `üìÖ Assessment Datum: ${new Date().toLocaleDateString('nl-NL')}`
                    }
                ]
            };
        }
        
        // Lead Tags Generation
        function generateLeadTags(data) {
            const tags = [];
            const leadScore = calculateLeadScore(data);
            const companyMaturity = getMaturityLevel(data.totalScore);
            
            // Score-based tags
            if (leadScore >= 250) tags.push('Hot Lead');
            else if (leadScore >= 180) tags.push('Warm Lead');
            else if (leadScore >= 120) tags.push('Qualified Lead');
            else tags.push('Cold Lead');
            
            // Maturity tags
            tags.push(`${companyMaturity} Maturity`);
            
            // Company size tags
            const sizeCategory = getCompanySizeCategory(data.companySize);
            tags.push(sizeCategory);
            
            // Sector tags
            tags.push(data.sectorCategory.charAt(0).toUpperCase() + data.sectorCategory.slice(1));
            tags.push(getSectorDisplayName(data.specificSector));
            
            // Service interest tags
            if (data.selectedService) {
                tags.push(`Interested in ${getServiceDisplayName(data.selectedService)}`);
            }
            
            // Urgency tags
            const urgency = assessUrgencyLevel(data.challenge);
            if (urgency === 'High') tags.push('Urgent Need');
            else if (urgency === 'Medium') tags.push('Medium Priority');
            
            // Assessment completion tags
            const completionRate = (Object.keys(data.assessmentAnswers).length + Object.keys(data.sectorAnswers).length) / 29 * 100;
            if (completionRate === 100) tags.push('Complete Assessment');
            else if (completionRate >= 80) tags.push('Partial Assessment');
            
            // A/B test variant tags
            if (abTest && abTest.userVariants) {
                Object.entries(abTest.userVariants).forEach(([test, variant]) => {
                    tags.push(`AB_${test}_${variant}`);
                });
            }
            
            // Special tags based on assessment scores
            if (data.totalScore >= 90) tags.push('Recruitment Expert');
            else if (data.totalScore >= 75) tags.push('Advanced Recruiter');
            else if (data.totalScore <= 40) tags.push('Needs Training');
            
            return tags;
        }
        
        // Email Template Data Generation
        function generateEmailTemplateData(data) {
            const leadScore = calculateLeadScore(data);
            const companyMaturity = getMaturityLevel(data.totalScore);
            const templateType = getEmailTemplateType(leadScore, companyMaturity);
            
            return {
                // Email targeting
                to_email: data.contactEmail,
                to_name: data.contactName,
                company_name: data.companyName,
                
                // Template selection
                template_type: templateType,
                template_id: getEmailTemplateId(templateType),
                
                // Personalization data
                contact_name: data.contactName,
                company_name: data.companyName,
                assessment_score: data.totalScore,
                maturity_level: companyMaturity,
                maturity_description: getMaturityDescription(companyMaturity),
                lead_score: leadScore,
                sector_name: getSectorDisplayName(data.specificSector),
                service_interest: getServiceDisplayName(data.selectedService),
                service_value: getServiceValue(data.selectedService),
                urgency_level: assessUrgencyLevel(data.challenge),
                challenge_summary: data.challenge || 'Niet opgegeven',
                
                // Recommended next steps
                next_steps: getNextStepsForEmail(leadScore, companyMaturity),
                recommended_meeting_type: getRecommendedMeetingType(leadScore),
                meeting_duration: getMeetingDuration(leadScore),
                
                // PDF attachment data
                pdf_attachment_needed: true,
                pdf_filename: `FlowMaster_Assessment_${data.companyName.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.pdf`,
                
                // Follow-up schedule
                follow_up_sequence: getFollowUpSequence(leadScore, companyMaturity),
                estimated_response_time: getEstimatedResponseTime(urgency),
                
                // Personalized recommendations
                personalized_insights: generatePersonalizedInsights(data),
                sector_specific_tips: getSectorSpecificTips(data.specificSector),
                improvement_areas: getImprovementAreas(data.assessmentAnswers, data.sectorAnswers),
                
                // CRM integration flags
                send_calendar_invite: leadScore >= 180,
                add_to_nurture_sequence: leadScore < 180,
                priority_flag: leadScore >= 250,
                
                // Timestamp and tracking
                email_sent_timestamp: new Date().toISOString(),
                session_id: sessionStorage.getItem('sessionId'),
                utm_source: 'flowmaster_assessment',
                utm_campaign: `assessment_${templateType}`,
                utm_content: companyMaturity.toLowerCase()
            };
        }
        
        // Dynamic PDF Library Loading
        function loadPDFLibrary() {
            return new Promise((resolve, reject) => {
                if (window.jsPDF || window.jspdf || typeof jsPDF !== 'undefined') {
                    resolve(true);
                    return;
                }
                
                const script = document.createElement('script');
                script.src = 'https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js';
                script.onload = () => resolve(true);
                script.onerror = () => reject(new Error('Failed to load PDF library'));
                document.head.appendChild(script);
            });
        }

        // Professional PDF Generation
        async function generateProfessionalPDF(data) {
            try {
                // Try to load PDF library if not available
                await loadPDFLibrary();
            } catch (error) {
                console.error('Could not load PDF library:', error);
                alert('PDF generatie niet beschikbaar. Probeer het later opnieuw.');
                return;
            }
            
            // Try multiple ways to access jsPDF
            let jsPDFClass = null;
            if (window.jspdf && window.jspdf.jsPDF) {
                jsPDFClass = window.jspdf.jsPDF;
            } else if (window.jsPDF) {
                jsPDFClass = window.jsPDF;
            } else if (typeof jsPDF !== 'undefined') {
                jsPDFClass = jsPDF;
            } else {
                console.error('jsPDF still not available after loading');
                alert('PDF library kon niet worden geladen.');
                return;
            }
            
            const doc = new jsPDFClass();
            const pageWidth = doc.internal.pageSize.width;
            const pageHeight = doc.internal.pageSize.height;
            const margin = 20;
            let yPos = 40;
            
            // Helper function to check if new page is needed
            function checkNewPage(additionalSpace = 20) {
                if (yPos + additionalSpace > pageHeight - 40) {
                    doc.addPage();
                    yPos = 30;
                    return true;
                }
                return false;
            }
            
            // ====== PROFESSIONAL HEADER ======
            
            // Navy blue header background
            doc.setFillColor(30, 58, 138);
            doc.rect(0, 0, pageWidth, 80, 'F');
            
            // Orange logo area
            doc.setFillColor(255, 107, 53);
            doc.roundedRect(margin, 15, 40, 30, 8, 8, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(20);
            doc.setFont(undefined, 'bold');
            doc.text('R', margin + 18, 33);
            
            // Main title
            doc.setFontSize(28);
            doc.text('FlowMaster Pro', margin + 50, 28);
            doc.setFontSize(16);
            doc.setFont(undefined, 'normal');
            doc.text('Wervingsanalyse Rapport', margin + 50, 38);
            doc.text('Persoonlijke analyse & verbeterplan', margin + 50, 48);
            
            // Client info box
            doc.setFillColor(255, 255, 255, 0.15);
            doc.roundedRect(margin, 55, pageWidth - 2 * margin, 20, 5, 5, 'F');
            doc.setFontSize(12);
            doc.text(`Bedrijf: ${data.companyName}`, margin + 10, 63);
            doc.text(`Contactpersoon: ${data.contactName}`, margin + 10, 68);
            doc.text(`Datum: ${new Date().toLocaleDateString('nl-NL')}`, pageWidth - margin - 80, 63);
            doc.text(`Branche: ${getSectorDisplayName(data.specificSector)}`, pageWidth - margin - 80, 68);
            
            // ====== EXECUTIVE SUMMARY ======
            yPos = 100;
            doc.setTextColor(30, 58, 138);
            doc.setFontSize(22);
            doc.setFont(undefined, 'bold');
            doc.text('üìã Samenvatting', margin, yPos);
            yPos += 20;
            
            doc.setTextColor(60, 60, 60);
            doc.setFontSize(14);
            doc.setFont(undefined, 'normal');
            const summaryText = `${data.companyName} heeft uitstekende mogelijkheden om het recruitment proces te transformeren naar een strategisch voordeel. Je assessment score van ${data.leadScore}/300 (Grade ${data.leadGrade}) toont een sterke basis met duidelijke groeimogelijkheden. Met gerichte aanpassingen kunnen we je werving optimaliseren voor aanzienlijk betere resultaten en kostenbesparing.`;
            const summaryLines = doc.splitTextToSize(summaryText, pageWidth - 2 * margin);
            summaryLines.forEach(line => {
                doc.text(line, margin, yPos);
                yPos += 6;
            });
            
            yPos += 15;
            
            // ====== KEY METRICS HIGHLIGHTS ======
            const highlights = [
                { value: data.leadScore + '/300', label: 'Assessment Score', icon: 'üéØ' },
                { value: 'Grade ' + data.leadGrade, label: 'Lead Classificatie', icon: '‚≠ê' },
                { value: getSectorDisplayName(data.specificSector).split(' ')[0], label: 'Sector Expertise', icon: 'üíº' },
                { value: '24u', label: 'Response Time', icon: '‚ö°' }
            ];
            
            const boxWidth = (pageWidth - 2 * margin - 15) / 2;
            const boxHeight = 35;
            let xPos = margin;
            
            highlights.forEach((highlight, index) => {
                if (index % 2 === 0 && index > 0) {
                    yPos += boxHeight + 10;
                    xPos = margin;
                }
                
                // Professional highlight box
                doc.setDrawColor(255, 107, 53);
                doc.setLineWidth(2);
                doc.roundedRect(xPos, yPos, boxWidth, boxHeight, 5, 5);
                
                doc.setFillColor(255, 240, 235);
                doc.roundedRect(xPos + 1, yPos + 1, boxWidth - 2, boxHeight - 2, 4, 4, 'F');
                
                doc.setFontSize(22);
                doc.setFont(undefined, 'bold');
                doc.setTextColor(255, 107, 53);
                doc.text(highlight.value.toString(), xPos + 10, yPos + 20);
                
                doc.setFontSize(11);
                doc.setFont(undefined, 'normal');
                doc.setTextColor(100, 100, 100);
                doc.text(highlight.label, xPos + 10, yPos + 28);
                
                xPos += boxWidth + 15;
            });
            
            yPos += boxHeight + 30;
            
            // ====== DETAILED ANALYSIS ======
            checkNewPage();
            
            doc.setTextColor(30, 58, 138);
            doc.setFontSize(22);
            doc.setFont(undefined, 'bold');
            doc.text('üìä Jouw Analyse Resultaten', margin, yPos);
            yPos += 20;
            
            const detailedMetrics = [
                { 
                    label: 'Proces Effici√´ntie', 
                    score: Math.min(Math.floor(data.leadScore / 3), 100), 
                    insight: 'Optimalisatie kan 30% tijdsbesparing opleveren'
                },
                { 
                    label: 'Kandidaat Sourcing', 
                    score: Math.min(Math.floor(data.leadScore / 2.8), 100), 
                    insight: 'LinkedIn strategie kan 45% meer kandidaten genereren'
                },
                { 
                    label: 'Werkgeversmerk Sterkte', 
                    score: Math.min(Math.floor(data.leadScore / 3.5), 100), 
                    insight: 'Sterker merk verhoogt acceptatiepercentage met 35%'
                },
                { 
                    label: 'Technology & Automation', 
                    score: Math.min(Math.floor(data.leadScore / 4), 100), 
                    insight: 'Moderne tools kunnen kosten per hire halveren'
                }
            ];
            
            detailedMetrics.forEach(metric => {
                doc.setTextColor(60, 60, 60);
                doc.setFontSize(12);
                doc.setFont(undefined, 'bold');
                doc.text(metric.label, margin, yPos);
                doc.text(`${metric.score}/100`, pageWidth - margin - 30, yPos);
                yPos += 8;
                
                // Progress bar
                doc.setFillColor(230, 230, 230);
                doc.roundedRect(margin, yPos, pageWidth - 2 * margin - 50, 8, 4, 4, 'F');
                
                const fillWidth = ((pageWidth - 2 * margin - 50) * metric.score) / 100;
                doc.setFillColor(255, 107, 53);
                doc.roundedRect(margin, yPos, fillWidth, 8, 4, 4, 'F');
                
                yPos += 12;
                
                doc.setTextColor(100, 100, 100);
                doc.setFontSize(9);
                doc.setFont(undefined, 'italic');
                doc.text(metric.insight, margin, yPos);
                yPos += 18;
            });
            
            // ====== STRATEGIC RECOMMENDATIONS ======
            yPos += 10;
            doc.setTextColor(30, 58, 138);
            doc.setFontSize(22);
            doc.setFont(undefined, 'bold');
            doc.text('üöÄ Top 3 Strategische Aanbevelingen', margin, yPos);
            yPos += 20;
            
            const recommendations = [
                {
                    title: 'Wervingsproces Versnellen',
                    priority: 'high',
                    description: 'Je belangrijkste uitdaging "werving duurt te lang" kunnen we direct aanpakken. Door het aantal sollicitatierondes te verminderen van 4 naar 2 en tegelijk referenties te checken, bespaar je direct 30 dagen op elke nieuwe aanname.'
                },
                {
                    title: 'LinkedIn Effectiever Gebruiken',
                    priority: 'high',
                    description: 'Je gebruikt LinkedIn nu op basisniveau. Met slimme zoektechnieken, betere berichten naar kandidaten en het opbouwen van een kandidatennetwerk bereik je 45% meer geschikte kandidaten.'
                },
                {
                    title: 'Werkgeversmerk Versterken',
                    priority: 'medium',
                    description: 'Een duidelijk verhaal over waarom werken bij jouw bedrijf uniek is, projecten laten zien en medewerkers als ambassadeurs inzetten verhoogt je aantrekkingskracht significant.'
                }
            ];
            
            recommendations.forEach((rec, index) => {
                checkNewPage(50);
                
                // Recommendation card
                doc.setFillColor(248, 250, 252);
                doc.roundedRect(margin, yPos, pageWidth - 2 * margin, 40, 8, 8, 'F');
                
                // Priority badge
                const priorityColors = {
                    'high': [239, 68, 68],
                    'medium': [245, 158, 11],
                    'low': [34, 197, 94]
                };
                doc.setFillColor(...(priorityColors[rec.priority] || priorityColors.medium));
                doc.roundedRect(pageWidth - margin - 80, yPos + 5, 70, 12, 6, 6, 'F');
                doc.setTextColor(255, 255, 255);
                doc.setFontSize(9);
                doc.setFont(undefined, 'bold');
                doc.text(rec.priority.toUpperCase() + ' PRIORITEIT', pageWidth - margin - 75, yPos + 12);
                
                // Title and content
                doc.setTextColor(30, 58, 138);
                doc.setFontSize(14);
                doc.setFont(undefined, 'bold');
                doc.text(`${index + 1}. ${rec.title}`, margin + 10, yPos + 18);
                
                doc.setTextColor(60, 60, 60);
                doc.setFontSize(11);
                doc.setFont(undefined, 'normal');
                const recLines = doc.splitTextToSize(rec.description, pageWidth - 2 * margin - 20);
                let lineY = yPos + 28;
                recLines.slice(0, 2).forEach(line => {
                    doc.text(line, margin + 10, lineY);
                    lineY += 5;
                });
                
                yPos += 50;
            });
            
            // ====== SERVICE OFFERINGS ======
            checkNewPage(80);
            
            doc.setTextColor(30, 58, 138);
            doc.setFontSize(22);
            doc.setFont(undefined, 'bold');
            doc.text('üéÅ Exclusieve Services voor Assessment Deelnemers', margin, yPos);
            yPos += 20;
            
            // Limited time badge
            doc.setFillColor(239, 68, 68);
            doc.roundedRect(margin, yPos, 160, 15, 8, 8, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            const expiryDate = new Date(Date.now() + 14*24*60*60*1000).toLocaleDateString('nl-NL');
            doc.text(`‚è∞ BEPERKTE TIJD - GELDIG TOT ${expiryDate}`, margin + 10, yPos + 10);
            yPos += 25;
            
            const services = [
                { 
                    title: 'Gratis Strategiesessie', 
                    value: '‚Ç¨750 waarde', 
                    desc: '30 min persoonlijke analyse + 3 concrete knelpunten + direct toepasbaar actieplan'
                },
                { 
                    title: 'LinkedIn Recruitment Training', 
                    value: '‚Ç¨450 waarde', 
                    desc: '45 min praktijktraining + bewezen zoektechnieken + professionele templates'
                },
                { 
                    title: 'Complete Werkgeversmerk Audit', 
                    value: '‚Ç¨950 waarde', 
                    desc: 'Uitgebreide analyse + concurrentenvergelijking + 5 high-impact verbeterpunten'
                }
            ];
            
            services.forEach(service => {
                checkNewPage(30);
                
                // Service card
                doc.setDrawColor(255, 107, 53);
                doc.setLineWidth(1);
                doc.roundedRect(margin, yPos, pageWidth - 2 * margin, 25, 6, 6);
                
                doc.setTextColor(255, 107, 53);
                doc.setFontSize(12);
                doc.setFont(undefined, 'bold');
                doc.text('üéØ ' + service.title, margin + 10, yPos + 10);
                
                // Value badge
                doc.setFillColor(255, 107, 53);
                doc.roundedRect(pageWidth - margin - 80, yPos + 3, 70, 10, 5, 5, 'F');
                doc.setTextColor(255, 255, 255);
                doc.setFontSize(9);
                doc.setFont(undefined, 'bold');
                doc.text(service.value, pageWidth - margin - 75, yPos + 9);
                
                doc.setTextColor(100, 100, 100);
                doc.setFontSize(10);
                doc.setFont(undefined, 'normal');
                doc.text(service.desc, margin + 10, yPos + 17);
                
                yPos += 35;
            });
            
            // ====== CALL TO ACTION ======
            yPos += 10;
            doc.setFillColor(30, 58, 138);
            doc.roundedRect(margin, yPos, pageWidth - 2 * margin, 35, 10, 10, 'F');
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(16);
            doc.setFont(undefined, 'bold');
            doc.text('üìß Kies Je Gratis Service - Exclusief voor Deelnemers', margin + 20, yPos + 15);
            doc.setFontSize(12);
            doc.setFont(undefined, 'normal');
            doc.text('Geen verplichtingen ‚Ä¢ Geen kleine lettertjes ‚Ä¢ 100% waardetoevoeging', margin + 20, yPos + 22);
            doc.text('üìû +31 614 314 593  |  ‚úâÔ∏è wouter@recruitin.nl  |  üåê www.recruitmentapk.nl', margin + 20, yPos + 28);
            
            // ====== PROFESSIONAL FOOTER ======
            const footerY = pageHeight - 25;
            doc.setDrawColor(255, 107, 53);
            doc.setLineWidth(1);
            doc.line(margin, footerY - 5, pageWidth - margin, footerY - 5);
            
            doc.setTextColor(120, 120, 120);
            doc.setFontSize(9);
            doc.setFont(undefined, 'normal');
            doc.text('FlowMaster Pro V4 - Advanced Recruitment Intelligence Platform | ¬© 2025 Recruitin BV', margin, footerY);
            doc.text(`Assessment ID: ${data.assessment_id || 'FM-' + Date.now()}`, margin, footerY + 6);
            doc.text(`Gegenereerd: ${new Date().toLocaleDateString('nl-NL')} ${new Date().toLocaleTimeString('nl-NL')}`, pageWidth - margin - 80, footerY);
            doc.text('Dit rapport is vertrouwelijk en exclusief voor ' + data.companyName, pageWidth - margin - 120, footerY + 6);
            
            // Save PDF
            const fileName = `FlowMaster_Professional_${data.companyName.replace(/[^a-zA-Z0-9]/g, '_')}_${new Date().toISOString().split('T')[0]}.pdf`;
            doc.save(fileName);
            
            console.log('Professional PDF generated successfully:', fileName);
            return fileName;
        }
        
        // Download Assessment Report Function - FIXED
        function downloadAssessmentReport() {
            const sessionData = sessionStorage.getItem('flowmasterAssessment');
            
            if (sessionData) {
                try {
                    const rawData = JSON.parse(sessionData);
                    console.log('Raw assessment data:', rawData);
                    
                    // Transform data to correct format for PDF generation
                    const assessmentData = {
                        // Core company info
                        companyName: rawData.companyName || formData.companyName || 'Onbekend Bedrijf',
                        contactName: rawData.contactName || formData.contactName || 'Onbekende Contactpersoon',
                        contactEmail: rawData.contactEmail || formData.contactEmail || '',
                        contactPhone: rawData.contactPhone || formData.contactPhone || '',
                        
                        // Scores and assessment results
                        totalScore: rawData.totalScore || formData.totalScore || 0,
                        leadScore: rawData.leadScore || calculateLeadScore(rawData) || 0,
                        leadGrade: rawData.leadGrade || getLeadGrade(rawData.leadScore || calculateLeadScore(rawData)) || 'D',
                        
                        // Sector information
                        specificSector: rawData.specificSector || formData.specificSector || 'unknown',
                        sectorDisplayName: getSectorDisplayName(rawData.specificSector || formData.specificSector),
                        
                        // Company details
                        companySize: rawData.companySize || formData.companySize || 'Onbekend',
                        companyMaturity: getMaturityLevel(rawData.totalScore || formData.totalScore || 0),
                        
                        // Service selection
                        selectedService: rawData.selectedService || formData.selectedService || 'basic',
                        
                        // Timestamps
                        timestamp: rawData.timestamp || new Date().toISOString(),
                        
                        // Assessment metadata
                        assessment_id: rawData.assessment_id || 'FM-' + Date.now(),
                        source: rawData.source || 'FlowMaster Pro V4'
                    };
                    
                    console.log('Processed assessment data for PDF:', assessmentData);
                    
                    // Show download preparation message
                    const downloadBtn = document.querySelector('[onclick="downloadAssessmentReport()"]');
                    const originalContent = downloadBtn.innerHTML;
                    downloadBtn.innerHTML = '‚è≥ Rapport wordt voorbereid...';
                    downloadBtn.disabled = true;
                    
                    // Generate and download PDF
                    setTimeout(() => {
                        const filename = generateProfessionalPDF(assessmentData);
                        
                        // Reset button
                        downloadBtn.innerHTML = originalContent;
                        downloadBtn.disabled = false;
                        
                        // Show success message
                        setTimeout(() => {
                            downloadBtn.innerHTML = '‚úÖ Rapport Gedownload!';
                            setTimeout(() => {
                                downloadBtn.innerHTML = originalContent;
                            }, 2000);
                        }, 500);
                        
                        // Track download event
                        if (typeof gtag !== 'undefined') {
                            gtag('event', 'pdf_download', {
                                event_category: 'engagement',
                                event_label: 'manual_download',
                                value: 1
                            });
                        }
                        
                    }, 1000);
                    
                } catch (error) {
                    console.error('Error downloading report:', error);
                    
                    // Show error message
                    const downloadBtn = document.querySelector('[onclick="downloadAssessmentReport()"]');
                    downloadBtn.innerHTML = '‚ùå Download Mislukt';
                    setTimeout(() => {
                        downloadBtn.innerHTML = 'üìÑ Download Je Rapport';
                        downloadBtn.disabled = false;
                    }, 3000);
                }
            } else {
                console.warn('No assessment data found for download');
                
                // Generate basic PDF with current form data
                const basicData = {
                    companyName: formData.companyName || 'Onbekend Bedrijf',
                    contactName: formData.contactName || 'Onbekende Gebruiker',
                    totalScore: formData.totalScore || 0,
                    companyMaturity: getMaturityLevel(formData.totalScore || 0),
                    leadScore: calculateLeadScore(formData),
                    leadGrade: getLeadGrade(calculateLeadScore(formData)),
                    sectorDisplayName: getSectorDisplayName(formData.specificSector)
                };
                
                generateProfessionalPDF(basicData);
            }
        }
        
        // Helper Functions
        function getCompanySizeCategory(size) {
            const categories = {
                '1-10': 'Startup',
                '11-50': 'Scale-up',
                '51-200': 'Middelgroot',
                '201-500': 'Groot',
                '500+': 'Enterprise'
            };
            return categories[size] || 'Unknown';
        }
        
        function getSectorDisplayName(sectorId) {
            const mapping = {
                'software_dev': 'Software Development',
                'bouw_constructie': 'Bouw & Constructie',
                'installatietechniek': 'Installatietechniek (W/E/Klimaat)',
                'metaalbewerking': 'Metaalbewerking & Industrie',
                'machinebouw': 'Machinebouw & Equipment',
                'hightech_elektronica': 'High-tech & Elektronica',
                'andere_technische': 'Andere technische sector',
                'it_infrastructure': 'IT Infrastructure',
                'data_analytics': 'Data & Analytics',
                'cybersecurity': 'Cybersecurity',
                'ai_ml': 'AI & Machine Learning',
                'cloud_computing': 'Cloud Computing',
                'energy': 'Energy & Utilities',
                'consulting': 'Consulting Services',
                'manufacturing': 'Manufacturing'
            };
            return mapping[sectorId] || sectorId;
        }
        
        function getServiceDisplayName(serviceId) {
            const mapping = {
                'optimization': 'AI-Powered Process Optimization',
                'branding': 'Next-Gen Employer Branding',
                'intelligence': 'Recruitment Intelligence Hub'
            };
            return mapping[serviceId] || 'Geen service geselecteerd';
        }
        
        function getServiceValue(serviceId) {
            const values = {
                'optimization': 3497,
                'branding': 2297,
                'intelligence': 1497
            };
            return values[serviceId] || 0;
        }
        
        function getLeadGrade(leadScore) {
            if (leadScore >= 250) return 'A+';
            if (leadScore >= 200) return 'A';
            if (leadScore >= 150) return 'B+';
            if (leadScore >= 100) return 'B';
            if (leadScore >= 50) return 'C';
            return 'D';
        }
        
        function getDealStage(leadScore) {
            if (leadScore >= 250) return 'Qualified';
            if (leadScore >= 180) return 'Interested';
            if (leadScore >= 120) return 'Contacted';
            return 'Lead';
        }
        
        function getDealProbability(leadScore) {
            if (leadScore >= 250) return 80;
            if (leadScore >= 200) return 60;
            if (leadScore >= 150) return 40;
            if (leadScore >= 100) return 25;
            return 10;
        }
        
        function getEstimatedCloseDate(leadScore, urgencyLevel) {
            let daysToAdd = 30; // Default 30 days
            
            if (leadScore >= 250) daysToAdd = 7;
            else if (leadScore >= 200) daysToAdd = 14;
            else if (leadScore >= 150) daysToAdd = 21;
            
            if (urgencyLevel === 'High') daysToAdd = Math.floor(daysToAdd / 2);
            else if (urgencyLevel === 'Low') daysToAdd = daysToAdd * 1.5;
            
            const closeDate = new Date();
            closeDate.setDate(closeDate.getDate() + daysToAdd);
            return closeDate.toISOString().split('T')[0];
        }
        
        function getMaturityDescription(maturityLevel) {
            const descriptions = {
                'Expert': 'Hoogontwikkelde recruitment organisatie met geavanceerde processen en technologie',
                'Advanced': 'Goed georganiseerde recruitment functie met ruimte voor optimalisatie',
                'Intermediate': 'Basis recruitment processen aanwezig, significante verbetermogelijkheden',
                'Developing': 'Ontwikkelende recruitment functie, heeft begeleiding nodig',
                'Beginner': 'Recruitment functie in vroege fase, heeft fundamentele ondersteuning nodig'
            };
            return descriptions[maturityLevel] || maturityLevel;
        }
        
        function getEmailTemplateType(leadScore, maturityLevel) {
            if (leadScore >= 250) return 'hot_lead_immediate';
            if (leadScore >= 200) return 'warm_lead_consultation';
            if (leadScore >= 150) return 'qualified_lead_nurture';
            if (leadScore >= 100) return 'interested_lead_education';
            return 'cold_lead_awareness';
        }
        
        function getEmailTemplateId(templateType) {
            const templateIds = {
                'hot_lead_immediate': 'flowmaster_hot_lead_001',
                'warm_lead_consultation': 'flowmaster_warm_lead_002',
                'qualified_lead_nurture': 'flowmaster_qualified_003',
                'interested_lead_education': 'flowmaster_interested_004',
                'cold_lead_awareness': 'flowmaster_cold_005'
            };
            return templateIds[templateType] || 'flowmaster_default_000';
        }
        
        function getNextActionRecommendation(leadScore, maturityLevel) {
            if (leadScore >= 250) return 'Direct contact binnen 2 uur - schedule demo call';
            if (leadScore >= 200) return 'Phone call binnen 24 uur voor consultation';
            if (leadScore >= 150) return 'Email follow-up met uitgebreide informatie';
            if (leadScore >= 100) return 'Toevoegen aan nurture sequence';
            return 'Educational content serie starten';
        }
        
        function getPriorityLevel(leadScore, urgencyLevel) {
            if (leadScore >= 250 || urgencyLevel === 'High') return 'Critical';
            if (leadScore >= 200) return 'High';
            if (leadScore >= 150) return 'Medium';
            return 'Low';
        }
        
        function getNextStepsForEmail(leadScore, maturityLevel) {
            const steps = [];
            
            if (leadScore >= 200) {
                steps.push('1. Persoonlijke kennismaking call inplannen (30 min)');
                steps.push('2. Specifieke uitdagingen en doelen bespreken');
                steps.push('3. Maatwerk proposal ontwikkelen');
            } else if (leadScore >= 150) {
                steps.push('1. Uitgebreide sector analyse ontvangen');
                steps.push('2. Best practices guide voor jouw maturity level');
                steps.push('3. Optional: strategie call inplannen');
            } else {
                steps.push('1. Educational resources ontvangen');
                steps.push('2. Deelname aan webinar serie');
                steps.push('3. Quarterly check-in voor voortgang');
            }
            
            return steps;
        }
        
        function getRecommendedMeetingType(leadScore) {
            if (leadScore >= 250) return 'Strategy & Demo Call';
            if (leadScore >= 200) return 'Consultation Call';
            if (leadScore >= 150) return 'Advisory Call';
            return 'Educational Call';
        }
        
        function getMeetingDuration(leadScore) {
            if (leadScore >= 250) return '45 minuten';
            if (leadScore >= 200) return '30 minuten';
            if (leadScore >= 150) return '20 minuten';
            return '15 minuten';
        }
        
        function getFollowUpSequence(leadScore, maturityLevel) {
            if (leadScore >= 200) {
                return ['Day 1: Welcome + Calendar Link', 'Day 3: Pre-meeting Prep', 'Day 7: Post-meeting Follow-up'];
            } else if (leadScore >= 150) {
                return ['Day 1: Welcome + Resources', 'Day 5: Educational Content', 'Day 14: Check-in'];
            } else {
                return ['Day 1: Welcome', 'Day 7: Educational Series', 'Day 21: Progress Check', 'Day 45: Re-engagement'];
            }
        }
        
        function getEstimatedResponseTime(urgencyLevel) {
            if (urgencyLevel === 'High') return '2 uur';
            if (urgencyLevel === 'Medium') return '24 uur';
            return '48 uur';
        }
        
        function generatePersonalizedInsights(data) {
            const insights = [];
            
            if (data.totalScore >= 80) {
                insights.push('Je organisatie heeft een sterke recruitment foundation');
            } else if (data.totalScore >= 60) {
                insights.push('Je recruitment proces heeft goede elementen met verbeterkansen');
            } else {
                insights.push('Er zijn significante kansen om je recruitment te professionaliseren');
            }
            
            // Sector-specific insights
            if (data.specificSector === 'hightech_elektronica') {
                insights.push('High-tech recruitment vereist gespecialiseerde sourcing strategie√´n');
            } else if (data.specificSector === 'bouw_constructie') {
                insights.push('Veiligheid en certificeringen zijn cruciaal in bouw recruitment');
            }
            
            return insights;
        }
        
        function getSectorSpecificTips(sectorId) {
            const tips = {
                'bouw_constructie': ['Focus op VCA certificeringen', 'Gebruik visuals in job posts', 'Netwerk via vakbeurzen'],
                'installatietechniek': ['Benadruk technische groei', 'Showcase innovatieve projecten', 'Partner met technische scholen'],
                'hightech_elektronica': ['Highlight R&D opportunities', 'Emphasize cutting-edge technology', 'Offer relocation packages'],
                'machinebouw': ['Focus op internationale projecten', 'Benadruk engineering excellentie', 'Showcase machinepark'],
                'metaalbewerking': ['Highlight vakmanschap', 'Showcase moderne machines', 'Focus op kwaliteit'],
                'andere_technische': ['Benadruk innovatie mogelijkheden', 'Focus op cross-training', 'Highlight R&D budget']
            };
            return tips[sectorId] || ['Focus op bedrijfscultuur', 'Benadruk groei mogelijkheden', 'Showcase expertise'];
        }
        
        function getImprovementAreas(assessmentAnswers, sectorAnswers) {
            const areas = [];
            
            // Analyze assessment answers for improvement areas
            Object.entries(assessmentAnswers).forEach(([questionId, score]) => {
                if (score <= 2) {
                    areas.push(getImprovementAreaForQuestion(questionId));
                }
            });
            
            return areas.filter(area => area).slice(0, 3); // Top 3 areas
        }
        
        function getImprovementAreaForQuestion(questionId) {
            const improvements = {
                'vraag1': 'Time-to-hire optimalisatie',
                'vraag2': 'Multi-channel recruitment strategie',
                'vraag3': 'KPI measurement en analytics',
                'vraag4': 'Candidate experience verbetering',
                'vraag5': 'Recruitment technology stack',
                'vraag8': 'Employer branding ontwikkeling'
            };
            return improvements[questionId];
        }
        
        function getRecommendedFollowUp(leadScore) {
            if (leadScore >= 250) return 'Direct phone call + demo scheduling';
            if (leadScore >= 200) return 'Consultation call binnen 48 uur';
            if (leadScore >= 150) return 'Email sequence met resources';
            return 'Educational nurture sequence';
        }
        
        function generateSessionId() {
            const sessionId = 'FMP_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            sessionStorage.setItem('sessionId', sessionId);
            return sessionId;
        }
        
        function calculateLeadScore(data) {
            let score = 0;
            
            // Company size scoring
            const sizeScores = { '1-10': 20, '11-50': 40, '51-200': 60, '201-500': 80, '500+': 100 };
            score += sizeScores[data.companySize] || 0;
            
            // Assessment score impact
            score += Math.floor(data.totalScore / 2);
            
            // Service interest scoring
            const serviceScores = { 'optimization': 100, 'branding': 80, 'intelligence': 60 };
            score += serviceScores[data.selectedService] || 0;
            
            // Sector complexity bonus
            const sectorBonus = { 
                'consulting': 20, 
                'hightech_elektronica': 18, 
                'andere_technische': 17,
                'machinebouw': 15, 
                'installatietechniek': 14,
                'bouw_constructie': 12,
                'energy': 10,
                'metaalbewerking': 8
            };
            score += sectorBonus[data.specificSector] || 0;
            
            return Math.min(score, 300); // Cap at 300
        }
        
        function getMaturityLevel(score) {
            if (score >= 90) return 'Expert';
            if (score >= 75) return 'Advanced';
            if (score >= 60) return 'Intermediate';
            if (score >= 40) return 'Developing';
            return 'Beginner';
        }
        
        function assessUrgencyLevel(challenge) {
            if (!challenge) return 'Low';
            
            const urgentKeywords = ['urgent', 'asap', 'direct', 'crisis', 'emergency', 'immediately'];
            const mediumKeywords = ['soon', 'quickly', 'weeks', 'month'];
            
            const text = challenge.toLowerCase();
            
            if (urgentKeywords.some(keyword => text.includes(keyword))) return 'High';
            if (mediumKeywords.some(keyword => text.includes(keyword))) return 'Medium';
            return 'Low';
        }
        
        function trackConversion(eventName, value) {
            // Facebook Pixel
            if (typeof fbq !== 'undefined') {
                fbq('track', 'Lead', { value: value, currency: 'EUR' });
            }
            
            // LinkedIn Insight Tag
            if (typeof lintrk !== 'undefined') {
                lintrk('track', { conversion_id: 12345678 });
            }
            
            // Custom tracking
            console.log(`Conversion tracked: ${eventName} with value ${value}`);
        }
        
        // Retry mechanism for failed webhook submissions
        function retryPendingSubmissions() {
            const pendingData = localStorage.getItem('pendingSubmission');
            if (!pendingData) return;
            
            try {
                const data = JSON.parse(pendingData);
                
                // Check if retry limit reached
                if (data.retryCount >= 3) {
                    console.log('Maximum retry attempts reached, abandoning submission');
                    localStorage.removeItem('pendingSubmission');
                    return;
                }
                
                console.log(`Attempting retry ${data.retryCount + 1} for pending submission...`);
                
                // Update retry data
                data.retryCount++;
                data.lastAttempt = new Date().toISOString();
                
                // Try backup webhook again
                fetch('https://hook.eu1.make.com/flowmaster-backup', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        ...data,
                        retryAttempt: true
                    })
                }).then(response => {
                    if (response.ok) {
                        console.log('‚úÖ Retry successful, removing pending submission');
                        localStorage.removeItem('pendingSubmission');
                    } else {
                        throw new Error('Retry failed');
                    }
                }).catch(error => {
                    console.log(`‚ùå Retry ${data.retryCount} failed:`, error);
                    
                    // Store updated retry data
                    localStorage.setItem('pendingSubmission', JSON.stringify(data));
                    
                    // Schedule next retry with exponential backoff
                    const nextRetryDelay = Math.min(60000 * Math.pow(2, data.retryCount), 300000); // Max 5 minutes
                    setTimeout(() => {
                        retryPendingSubmissions();
                    }, nextRetryDelay);
                });
                
            } catch (error) {
                console.error('Error parsing pending submission data:', error);
                localStorage.removeItem('pendingSubmission');
            }
        }
        
        // Check for pending submissions on page load
        function checkPendingSubmissions() {
            const pendingData = localStorage.getItem('pendingSubmission');
            if (pendingData) {
                console.log('Found pending submission, scheduling retry...');
                setTimeout(() => {
                    retryPendingSubmissions();
                }, 5000); // Wait 5 seconds before first retry
            }
        }

        // Live chat
        function openChat() {
            alert('Chat functionaliteit wordt geladen...\n\nMail ons direct: wouter@recruitin.nl\nBel ons: +31 614 314 593\n\nWouter Arts - Directeur Recruitin BV');
        }

        // Event listeners
        document.getElementById('companyName').addEventListener('input', updateStep2Button);
        document.getElementById('contactName').addEventListener('input', updateStep2Button);
        document.getElementById('contactEmail').addEventListener('input', updateSubmitButton);
        document.getElementById('contactPhone').addEventListener('input', updateSubmitButton);
        document.getElementById('privacyConsent').addEventListener('change', handlePrivacyChange);

        // Initialize
        updateProgress();
        checkPendingSubmissions();
    </script>
</body>
</html><!-- FORCE UPDATE: zo 27 jul. 2025 21:39:48 CEST -->
